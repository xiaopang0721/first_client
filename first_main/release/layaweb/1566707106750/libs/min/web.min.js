// vfish1.0
var web;!function(t){var e,m,y,i;e=t.libs||(t.libs={}),m=Laya.HttpRequest,y=Laya.Event,i=function(){function t(t,e,i,n){this._game_id=t,this._mgr=e,this._url=i,this._onNotLogin=n,this._httpRquestPool=[]}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),t.prototype.popRequest=function(){return 0<this._httpRquestPool.length?this._httpRquestPool.pop():new m},t.prototype.pushRequest=function(t){if(!t)return;t.offAll();this._httpRquestPool.push(t)},t.prototype.OnComplete=function(t,e,i){var n=i?JSON.parse(i):null;if(!n)return void(e&&e(i));if(n&&!n.success)return n.is_notlogin&&this._onNotLogin&&this._onNotLogin(),void(e&&e(i));n&&n.change_data&&this._mgr.ReadMsg(n.change_data),t&&t(n)},t.prototype.login=function(t,e,i,n){var o=this;this._httpRequest=this._httpRequest||new m;var s=this._url+"/login",h="invite="+t+"&game_id="+this._game_id+"&code="+e;this._httpRequest.send(s,h,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){o._unionid=t.unionid,i&&i(t)},n]),this._httpRequest.once(y.ERROR,this,n)},t.prototype.loginTest=function(t,e,i,n){var o=this;this._httpRequest=this._httpRequest||new m;var s=this._url+"/login_test",h="invite="+t+"&game_id="+this._game_id+"&code="+e;this._httpRequest.send(s,h,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){o._unionid=t.unionid,i&&i(t)},n]),this._httpRequest.once(y.ERROR,this,n)},t.prototype.getAccessToken=function(t,e,i,n){this._httpRequest=this._httpRequest||new m;var o=this._url+"/get_access_token";o+="unionid="+this._unionid+"&game_id="+this._game_id+"&path="+t+"&width="+e,this._httpRequest.send(o,"","get"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[i,n]),this._httpRequest.once(y.ERROR,this,n)},t.prototype.loginCrazy=function(t,e,i,n){var o=this;this._httpRequest=this._httpRequest||new m;var s=this._url+"/login_crazy",h="invite="+t+"&game_id="+this._game_id+"&code="+e;this._httpRequest.send(s,h,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){o._unionid=t.unionid,i&&i(t)},n]),this._httpRequest.once(y.ERROR,this,n)},t.prototype.GetLoginInfo=function(t,e,i,n,o,s){var h=this;this._httpRequest=this._httpRequest||new m;var r=t+"/get_login_info",u="game_id="+this._game_id+"&code="+e+"&encrypted_data="+i+"&iv="+n;this._httpRequest.send(r,u,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){h._unionid=t.unionid,h._login_str=t.login_str,h._url=t.url,o&&o(t)},s]),this._httpRequest.once(y.ERROR,this,s)},t.prototype.GetLoginInfoH5=function(t,e,i,n,o,s,h,r,u,p,a,_,l,c,d,f){var v=this;this._httpRequest=this._httpRequest||new m;var g=t+"/get_login_info_h5",R="game_id="+this._game_id+"&channelExt="+e+"&email="+i+"&game_appid="+n+"&new_time="+o+"&loginplatform2cp="+s+"&user_id="+h+"&sdklogindomain="+r+"&openid="+l+"&sex="+c+"&sdkloginmodel="+u+"&sign="+p+"&icon="+a+"&nickname="+_;this._httpRequest.send(g,R,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){v._unionid=t.unionid,v._login_str=t.login_str,v._url=t.url,d&&d(t)},f]),this._httpRequest.once(y.ERROR,this,f)},t.prototype.GetLoginInfoTest=function(t,e,i,n){var o=this;this._httpRequest=this._httpRequest||new m;var s=t+"/get_login_info_test",h="game_id="+this._game_id+"&code="+e;this._httpRequest.send(s,h,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[function(t){o._unionid=t.unionid,o._login_str=t.login_str,o._url=t.url,i&&i(t)},n]),this._httpRequest.once(y.ERROR,this,n)},t.prototype.ShardsLogin=function(t,e,i,n,o){this._httpRequest=this._httpRequest||new m;var s=this._url+"/shards_login",h="invite="+t+"&game_id="+this._game_id+"&login_str="+e;null==i&&(i=""),h=h+"&qd_id="+i,this._httpRequest.send(s,h,"post"),this._httpRequest.once(y.COMPLETE,this,this.OnComplete,[n,o]),this._httpRequest.once(y.ERROR,this,o)},t}(),e.WebProtocolsBase=i}(web||(web={})),function(t){var e,i;e=t.libs||(t.libs={}),i=function(){function t(){this._objMap=new Object,this._eventDip=new Laya.EventDispatcher}return Object.defineProperty(t.prototype,"eventDip",{get:function(){return this._eventDip},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,i,n){this._eventDip.on(t,e,i,n)},t.prototype.off=function(t,e,i,n){this._eventDip.off(t,e,i,n)},t.prototype.GetObj=function(t){return this._objMap[t]},t.prototype.ReadMsg=function(t){for(var e=0;e<t.all_data.length;e++){var i=t.all_data[e],n=i[1]+","+i[0],o=i[1],s=this.GetObj(n);null==s&&(s=this.createObject(o,n),this._objMap[n]=s),t.createBlock?s.ReadCreate(i[2]):s.ReadUpdate(i[2])}},t.prototype.createObject=function(t,e){throw"not implement"},t}(),e.WebObjectMgrBase=i}(web||(web={})),function(t){var e,i;e=t.libs||(t.libs={}),i=function(){function t(t){this._guid=t,this._numbers=new Array,this._bits=new Array,this._strs=new Array,this._intEventFun=[],this._bitEventFun=[],this._strEventFun=[],this._eventDip=new Laya.EventDispatcher}return t.prototype.on=function(t,e,i,n){this._eventDip.on(t,e,i,n)},t.prototype.off=function(t,e,i,n){this._eventDip.off(t,e,i,n)},t.prototype.GetGuid=function(){return this._guid},t.prototype.SetNumber=function(t,e){this._numbers[t]!=(this._numbers[t]=e)&&this.onCallFun(this._intEventFun,t)},t.prototype.GetNumber=function(t){return this._numbers[t]||0},t.prototype.setBitValue=function(t,e){var i=this.GetBit(t);e?this.SetBit(t):this.UnSetBit(t),i!=e&&this.onCallFun(this._bitEventFun,t)},t.prototype.SetBit=function(t){this._bits[t]=!0},t.prototype.UnSetBit=function(t){this._bits[t]=!1},t.prototype.GetBit=function(t){return this._bits[t]||!1},t.prototype.SetStr=function(t,e){this._strs[t]!=(this._strs[t]=e)&&this.onCallFun(this._strEventFun,t)},t.prototype.GetStr=function(t){return this._strs[t]||""},t.prototype.readValues=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];null!=n&&e(i+1,n)}},t.prototype.ReadCreate=function(t){var i=this;this.readValues(t.numbers,function(t,e){i.SetNumber(t,e)}),this.readValues(t.bits,function(t,e){i.setBitValue(t,0!=e)}),this.readValues(t.strs,function(t,e){i.SetStr(t,e)})},t.prototype.readUpdateValues=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];e(n[0],n[1])}},t.prototype.ReadUpdate=function(t){var i=this;this.readUpdateValues(t[0],function(t,e){i.SetNumber(t,e)}),this.readUpdateValues(t[1],function(t,e){i.setBitValue(t,0!=e)}),this.readUpdateValues(t[2],function(t,e){i.SetStr(t,e)})},t.prototype.AddListen=function(t,e,i){this.addFun(this._intEventFun,t,e,i)},t.prototype.removeListene=function(t,e,i){void 0===i&&(i=null),this.removeFun(this._intEventFun,t,e,i)},t.prototype.AddListenString=function(t,e,i){this.addFun(this._strEventFun,t,e,i)},t.prototype.removeListeneString=function(t,e,i){this.removeFun(this._strEventFun,t,e,i)},t.prototype.AddListenBit=function(t,e,i){this.addFun(this._bitEventFun,t,e,i)},t.prototype.removeListeneBit=function(t,e,i){this.removeFun(this._bitEventFun,t,e,i)},t.prototype.AddListensSeq=function(t,e,i,n){var o=ObjectPools.malloc(core.obj.HanlderStruct);o.caller=i,o.method=n;for(var s=t;s<=e;s++)this.addFun(this._intEventFun,s,i,n,o)},t.prototype.removeListenesSeq=function(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);for(var o=t;o<=e;o++)this.removeFun(this._intEventFun,o,i,n,0==o)},t.prototype.addFun=function(t,e,i,n,o){var s=t[e];s||(s=[]);for(var h=s.length,r=0;r<h;r++){var u=s[r];if(u&&u.caller==i&&u.method==n)return}o||((o=ObjectPools.malloc(core.obj.HanlderStruct)).caller=i,o.method=n),s.push(o),t[e]=s},t.prototype.removeFun=function(t,e,i,n,o){void 0===o&&(o=!0);var s=t[e];if(s&&s.length){for(var h=s.length,r=0;r<h;r++){var u=s[r];u&&((null==n||u.caller==i&&u.method==n)&&(s.splice(r),r=r<=1?0:r-1,o&&ObjectPools.free(u)))}t[e]=s}},t.prototype.onCallFun=function(t,e){var i=t[e];if(i&&i.length)for(var n=i.length,o=0;o<n;o++){var s=i[o];s&&s.caller&&s.method&&s.method.call(s.caller,null)}},t}(),e.WebObjectBase=i}(web||(web={}));