function extend(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var i=t.ExtendInit;i&&i.call(t)}function applog(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];window.android&&window.android.print&&window.android.print(t),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.logger&&window.webkit.messageHandlers.logger.postMessage(t)}function logd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];core.utils.Log.LEVEL<4||(core.utils.Log.DATE.setTime(Date.now()),t.unshift(core.utils.Log.DATE.getHours()+":"+(core.utils.Log.DATE.getMinutes()+1)+":"+core.utils.Log.DATE.getSeconds()+":"+core.utils.Log.DATE.getMilliseconds()),t.unshift("[D]"),console.debug(t.join(" ")),applog(t.join(" ")))}function logl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];core.utils.Log.LEVEL<3||(core.utils.Log.DATE.setTime(Date.now()),t.unshift(core.utils.Log.DATE.getHours()+":"+(core.utils.Log.DATE.getMinutes()+1)+":"+core.utils.Log.DATE.getSeconds()+":"+core.utils.Log.DATE.getMilliseconds()),t.unshift("[L]"),console.log(t.join(" ")),applog(t.join(" ")))}function logw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];core.utils.Log.LEVEL<2||(core.utils.Log.DATE.setTime(Date.now()),t.unshift(core.utils.Log.DATE.getHours()+":"+(core.utils.Log.DATE.getMinutes()+1)+":"+core.utils.Log.DATE.getSeconds()+":"+core.utils.Log.DATE.getMilliseconds()),t.unshift("[W]"),console.warn(t.join(" ")),applog(t.join(" ")))}function loge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];core.utils.Log.LEVEL<1||(core.utils.Log.DATE.setTime(Date.now()),t.unshift(core.utils.Log.DATE.getHours()+":"+(core.utils.Log.DATE.getMinutes()+1)+":"+core.utils.Log.DATE.getSeconds()+":"+core.utils.Log.DATE.getMilliseconds()),t.unshift("[E]"),console.log(t.join(" ")),applog(t.join(" ")))}function getPrefix(t){var e=t.indexOf(".");return-1==e?"":t.substr(0,e)}function makeGuid(t,e){return t+"."+e}!function(t){var a,h,e;function n(){}a=t.utils||(t.utils={}),h=Laya.Handler,Object.defineProperty(n,"eventDispatcher",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new EventDispatcher),this._eventDispatcher},enumerable:!0,configurable:!0}),n.on=function(t,e,n,i){return this.eventDispatcher.on(t,e,n,i)},n.once=function(t,e,n,i){return this.eventDispatcher.once(t,e,n,i)},n.off=function(t,e,n,i){return this.eventDispatcher.off(t,e,n,i)},n.event=function(t,e){return this.eventDispatcher.event(t,e)},n.addSearchPath=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),this._searchPathFiels?loge("Vesion.addSearchPath mast before Vesion.loadVesionFile"):n?(this._searchPaths.unshift(t),this._searchPathLangRes.unshift(e)):(this._searchPaths.push(t),this._searchPathLangRes.push(e))},n.foreachSearchPath=function(t){for(var e=this._searchPaths.length,n=0;n<e;n++)if(t(this._searchPaths[n],e==n+1))return},n.loadVesionFile=function(n){var i=this;void 0===n&&(n="version.bin"),n&&""!=n?Laya.loader.load(n,h.create(this,function(t){var e=t?a.StringU.readZlibData(new a.ByteArray(t)):null;Laya.loader.clearRes(n,!0),i.initVesionFiles(e)},null,!0)):(Laya.loader.clearRes(n,!0),this.initVesionFiles(null))},n.initVesionFiles=function(t){var n=this;if(t){var e=t.split("\n");this._defaultVesion=e[1];for(var i=0;i<e.length;i++)if(e[i]&&0!=e[i].length){var r=e[i].split(" ");2==r.length&&(this._VESION_FILES[r[0]]=r[1])}}this.baseFormatURL=Laya.URL.formatURL,Laya.URL.formatURL=function(t,e){return n.formatURL(t,e)},this.loadLangRes(function(){n.event(n.LOAD_VESION_COMPLETE)})},n.addNotNeetSearchPath=function(t){-1==this._notNeetSearchPaths.indexOf(t)&&this._notNeetSearchPaths.push(t)},n.removeNotNeetSearchPath=function(t){var e=this._notNeetSearchPaths.indexOf(t);-1!=e&&this._notNeetSearchPaths.splice(e,1)},n.formatURL=function(t,e){if(!t||-1!=t.indexOf("?v="))return t;e=e||Laya.URL.basePath,0==t.indexOf(e)&&(t=t.replace(e,"")),0==t.indexOf(this._assetUrl)&&(e=this._assetUrl,t=t.replace(this._assetUrl,"")),t=t.split("\\").join("/");for(var n=null,i=0,r=this._notNeetSearchPaths;i<r.length;i++){var s=r[i];if(0==t.indexOf(s)){n="";break}}if(null==n&&(null!=this.defaultPath&&0==t.indexOf(this.defaultPath)&&(n=""),null==n))for(var o=0;o<this._searchPaths.length;o++){if(0==t.indexOf(this._searchPaths[o])){n="";break}var a=this._searchPathFiels[this._searchPaths[o]];if(a&&a[t]){n=this._searchPaths[o];break}}return null==n&&(n=this.defaultPath),null!=n&&(t=n+t),t=this.createVersion(t),e==this._assetUrl&&0==t.indexOf(e)&&(e=""),t=this.baseFormatURL(t,e)},n.loadLangRes=function(e,t){var n=this;if(void 0===t&&(t=0),t>=this._searchPathLangRes.length)null!=e&&e();else{var i=t,r=this._searchPathLangRes[i],s=++t;if(r&&""!=r){var o=this._searchPaths[i];Laya.loader.load(this.createVersion(o+r),h.create(this,function(t){n.initLang(new a.ByteArray(t),o),n.loadLangRes(e,s)},null,!0))}else this.loadLangRes(e,s)}},n.initLang=function(t,e,n){void 0===n&&(n=!1),this._searchPathFiels=this._searchPathFiels||{};var i=this._searchPathFiels[e];i={},this._searchPathFiels[e]=i,t.endian=a.Endian.LITTLE_ENDIAN;for(var r=a.StringU.readZlibData(t).split("\r\n"),s=0;s<r.length;s++)r[s]&&0!=r[s].length&&(i[r[s].split(" ")[0]]=!0);a.L.loadOprates(a.StringU.readZlibData(t),n),a.L.loadLangs(a.StringU.readZlibData(t),n)},Object.defineProperty(n,"assetUrl",{set:function(t){this._assetUrl=t},enumerable:!0,configurable:!0}),n.createVersion=function(t){if(this._assetUrl){var e=null;if(this._VESION_FILES&&(e=this._VESION_FILES[t]),e){var n=t.lastIndexOf("/")+1;t=this._assetUrl+t.substring(0,n)+e+"_"+t.substring(n)+"?v="}}return t},n.LOAD_VESION_COMPLETE="LOAD_VESION_COMPLETE",n._searchPaths=[],n._searchPathLangRes=[],n._VESION_FILES={},n._notNeetSearchPaths=["http://","https://"],e=n,a.Vesion=e}(core=core||{}),function(t){var e,n;function o(t,e){this.x=t||0,this.y=e||0}e=t.utils||(t.utils={}),Object.defineProperty(o.prototype,"len",{get:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},set:function(t){this.normalize(),this.mul(t)},enumerable:!0,configurable:!0}),o.prototype.normalize=function(){var t=this.len;return 0<t&&(this.x=this.x/t,this.y=this.y/t),this},o.prototype.equal=function(t){var e=this.x>t.x?this.x-t.x:t.x-this.x;return(this.y>t.y?this.y-t.y:t.y-this.y)<1e-6&&e<1e-6},o.prototype.dist=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},o.prototype.add=function(t){var e=this.x+t.x,n=this.y+t.y;return this.x=e,this.y=n,this},o.prototype.sub=function(t){var e=this.x-t.x,n=this.y-t.y;return this.x=e,this.y=n,this},o.sub=function(t,e,n){var i=e.x-n.x,r=e.y-n.y;return(t=t||o.vec2).x=i,t.y=r,t},o.prototype.mul=function(t){return this.x=this.x*t,this.y=this.y*t,this},o.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},o.prototype.lerp=function(t,e){var n=1-e;return this.x=this.x*n+t.x*e,this.y=this.y*n+t.y*e,this},o.prototype.fromToward=function(t,e){e=e||o.TowardCount;var n=2*Math.PI*t/e,i=Math.cos(n),r=Math.sin(n);return this.x=i,this.y=r,this.normalize(),this},o.prototype.getToward=function(t){t=t||o.TowardCount;var e=this.x,n=this.y,i=Math.atan2(n,e);i<0&&(i+=2*Math.PI);var r=i/(2*Math.PI/t),s=Math.floor(.5+r);return s==t?0:s},o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.angle=function(t){var e=Math.atan2(t.y,t.x)-Math.atan2(this.x,this.y);return e>Math.PI&&(e-=2*Math.PI),e<-Math.PI&&(e+=2*Math.PI),e},o.prototype.toString=function(t){return"{"+this.x.toFixed(t||4)+","+this.y.toFixed(t||4)+"}"},o.TowardCount=8,o.zero=new o(0,0),o.right=new o(1,0),o.upRight=new o(1,1).normalize(),o.left=new o(-1,0),o.up=new o(0,1),o.down=new o(0,-1),o.temp=new o(0,0),o.vec2=new o,n=o,e.Vector2=n,e.float2Byte=function(t){var e=127*(t=(t=1<t?1:t)<-1?-1:t);return(e=Math.floor(e+.5))<0?128-e:e},e.byte2Float=function(t){var e=(t=128<t?-(t-128):t)/127;return 1<e?e-1:e}}(core=core||{}),function(t){var e,n;function i(){}e=t.utils||(t.utils={}),i.LEVEL=i.MAX_LOG_LEVEL=4,i.DATE=new Date,n=i,e.Log=n}(core=core||{}),null==console.assert&&(console.assert=function(t,e){if(!t)throw e}),function(t){var r,e;function n(){}r=t.utils||(t.utils={}),n.substitute=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)return"";var i,r=e.length;1==r&&e[0]instanceof Array?r=(i=e[0]).length:i=e;for(var s=0;s<r;s++)t=t.replace(new RegExp("\\{"+s+"\\}","g"),i[s]);return t},n.isEmpty=function(t){return null==t||0==t.length},n.trim=function(t){return null==t?null:this.rtrim(this.ltrim(t))},n.ltrim=function(t){return null==t?null:t.replace(/^\s*/,"")},n.rtrim=function(t){return null==t?null:t.replace(/\s*$/,"")},n.beginsWith=function(t,e){return e==t.substring(0,e.length)},n.endsWith=function(t,e){return e==t.substring(t.length-e.length)},n.getParameter=function(t,e){if(!t||0==t.length)return"";for(var n=t.substring(t.indexOf("?")+1,t.length).split("&"),i={},r=0;r<n.length;r++){var s=n[r];i[s.substring(0,s.indexOf("=")).toLowerCase()]=s.substring(s.indexOf("=")+1,s.length)}var o=i[e.toLowerCase()];return o&&void 0!==o?o:""},n.parameterToObj=function(t){for(var e=t.substring(t.indexOf("?")+1,t.length).split("&"),n={},i=0;i<e.length;i++){var r=e[i];n[r.substring(0,r.indexOf("=")).toLowerCase()]=r.substring(r.indexOf("=")+1,r.length)}return n},n.paddingLeft=function(t,e,n){var i=n-t.length;if(i<=0)return t;t=String(t);for(var r=0;r<i;r++)t=e+t;return t},n.readZlibData=function(t){var e=t.readUnsignedInt();this._tempBytesArray||(this._tempBytesArray=new r.ByteArray);var n=this._tempBytesArray;n.length=e,t.readBytes(n,0,e),n.uncompress();var i=n.readUTFBytes(n.length);return n.clear(),i},n.formatDiff=function(t,e){if(!t)return null;var n=t/1e3,i=Math.floor(n/86400/365);n%=31536e3;var r=Math.floor(n/86400/30);n%=2592e3;var s=Math.floor(n/86400);n%=86400;var o=Math.floor(n/3600);n%=3600;var a=Math.floor(n/60);n%=60;var h={"y+":i,"M+":r,"d+":s,"h+":o,"m+":a,"s+":Math.floor(n)};return this.format(h,e)},n.formatDate=function(t,e){if(!t)return null;var n={"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};return this.format(n,e)},n.format=function(t,e){for(var n in""==e&&(e=1<=t["d+"]?"dd天hh小时":t["d+"]<1&&1<t["h+"]?"hh:mm分":"mm:ss秒"),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},e=n,r.StringU=e}(core=core||{}),function(t){var n,e;function i(t){this.seed=0,this.m=Math.pow(2,32),this.a=1664525,this.c=1013904223,this.seed=t}n=t.utils||(t.utils={}),Object.defineProperty(i,"instance",{get:function(){return this._instance||(this._instance=new i(0)),this._instance},enumerable:!0,configurable:!0}),i.scand=function(t){this.instance.scand(t)},i.rand=function(){return this.instance.rand()},i.randFloat=function(){return this.instance.randFloat()},i.randInt=function(t,e){return this.instance.randInt(t,e)},i.prototype.scand=function(t){this.seed=n.MathU.parseInt(t)},i.prototype.rand=function(){return this.seed=(this.seed*this.a+this.c)%this.m,this.seed},i.prototype.randFloat=function(){return this.rand()/(this.m+1)},i.prototype.randInt=function(t,e){return t=n.MathU.parseInt(t),e=n.MathU.parseInt(e),Math.min(t,e)+n.MathU.parseInt((Math.abs(t-e)+1)*this.randFloat())},e=i,n.Random=e}(core=core||{}),function(t){!function(t){var n=(e.malloc=function(t,e){void 0===e&&(e=null);for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var s=this._pools[t.name];if(s&&(n=s.pull()),!n)if(e)switch(e.length){case 0:n=new t;break;case 1:n=new t(e[0]);break;case 2:n=new t(e[0],e[1]);break;case 3:n=new t(e[0],e[1],e[2]);break;case 4:n=new t(e[0],e[1],e[2],e[3]);break;case 5:n=new t(e[0],e[1],e[2],e[3],e[4]);break;case 6:n=new t(e[0],e[1],e[2],e[3],e[4],e[5]);break;case 7:n=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);break;case 8:n=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);break;case 9:n=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);break;case 10:n=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9])}else n=new t;return n.outPool.apply(n,i),n},e.free=function(t){var e=t.poolName,n=this._pools[e];n||(n=new i(e),this._pools[e]=n),t.intoPool(),n.push(t)},e.update=function(t){if(0<this._nextUpdateTime)this._nextUpdateTime-=t;else for(var e in this._nextUpdateTime=2e4,this._pools)this._pools[e].adaptSize()},e.MOLD_DEBUG_STRICT=0,e.mold=e.MOLD_RELEASE_FAIL_SAFE=1,e._pools={},e._nextUpdateTime=0,e);function e(){}t.ObjectPools=n;var i=(r.prototype.push=function(t){var e=this._list.length;-1==this._list.indexOf(t)?this._list[e]=t:n.mold==n.MOLD_DEBUG_STRICT&&loge("error: free IPoolsObject in pool "+this._key)},r.prototype.pull=function(){var t,e=this._list.length-1;return 0<=e&&(t=this._list[e],this._list.length=e,this._minSize=Math.min(this._minSize,e),this._maxSize=Math.max(this._maxSize,e),this._mask=0),t},r.prototype.adaptSize=function(){this._mask++;var t=this._maxSize-this._minSize;this._mask<3&&(t+=2),this._list.length>t&&(this._list.length=t),this._minSize=this._maxSize=0},r);function r(t){this._list=[],this._minSize=0,this._maxSize=0,this._mask=0,this._key=t}}(t.utils||(t.utils={}))}(core=core||{}),function(t){var a,e;function n(){}a=t.utils||(t.utils={}),n.addFirstname=function(t){for(var e=0,n=t.split(",");e<n.length;e++){var i=n[e];this._firstname.push(i)}},n.addManSecondname=function(t){for(var e=0,n=t.split(",");e<n.length;e++){var i=n[e];this._manSecondname.push(i)}},n.addWomanSecondname=function(t){for(var e=0,n=t.split(",");e<n.length;e++){var i=n[e];this._womanSecondname.push(i)}},n.getRandomNickname=function(t){var e=this._firstname,n=t==this.SEX_MAN?this._manSecondname:this._womanSecondname,i=a.MathU.randomRange(0,e.length-1),r=a.MathU.randomRange(0,n.length-1),s=e[i];s=s||"";var o=n[r];return o=o||"我是无名氏",s.trim()+o.trim()},n.SEX_MAN=1,n._firstname=[],n._manSecondname=[],n._womanSecondname=[],e=n,a.RandNickname=e}(core=core||{}),function(t){!function(f){var t=(e.hash=function(t){var e=new f.ByteArray;return e.writeUTFBytes(t),this.hashBinary(e)},e.hashBytes=function(t){return this.hashBinary(t)},e.hashBinary=function(t){for(var e,n,i,r,s=1732584193,o=-271733879,a=-1732584194,h=271733878,u=this.createBlocks(t),_=u.length,c=0;c<_;c+=16)e=s,n=o,i=a,r=h,s=this.ff(s,o,a,h,u[c+0],7,-680876936),h=this.ff(h,s,o,a,u[c+1],12,-389564586),a=this.ff(a,h,s,o,u[c+2],17,606105819),o=this.ff(o,a,h,s,u[c+3],22,-1044525330),s=this.ff(s,o,a,h,u[c+4],7,-176418897),h=this.ff(h,s,o,a,u[c+5],12,1200080426),a=this.ff(a,h,s,o,u[c+6],17,-1473231341),o=this.ff(o,a,h,s,u[c+7],22,-45705983),s=this.ff(s,o,a,h,u[c+8],7,1770035416),h=this.ff(h,s,o,a,u[c+9],12,-1958414417),a=this.ff(a,h,s,o,u[c+10],17,-42063),o=this.ff(o,a,h,s,u[c+11],22,-1990404162),s=this.ff(s,o,a,h,u[c+12],7,1804603682),h=this.ff(h,s,o,a,u[c+13],12,-40341101),a=this.ff(a,h,s,o,u[c+14],17,-1502002290),o=this.ff(o,a,h,s,u[c+15],22,1236535329),s=this.gg(s,o,a,h,u[c+1],5,-165796510),h=this.gg(h,s,o,a,u[c+6],9,-1069501632),a=this.gg(a,h,s,o,u[c+11],14,643717713),o=this.gg(o,a,h,s,u[c+0],20,-373897302),s=this.gg(s,o,a,h,u[c+5],5,-701558691),h=this.gg(h,s,o,a,u[c+10],9,38016083),a=this.gg(a,h,s,o,u[c+15],14,-660478335),o=this.gg(o,a,h,s,u[c+4],20,-405537848),s=this.gg(s,o,a,h,u[c+9],5,568446438),h=this.gg(h,s,o,a,u[c+14],9,-1019803690),a=this.gg(a,h,s,o,u[c+3],14,-187363961),o=this.gg(o,a,h,s,u[c+8],20,1163531501),s=this.gg(s,o,a,h,u[c+13],5,-1444681467),h=this.gg(h,s,o,a,u[c+2],9,-51403784),a=this.gg(a,h,s,o,u[c+7],14,1735328473),o=this.gg(o,a,h,s,u[c+12],20,-1926607734),s=this.hh(s,o,a,h,u[c+5],4,-378558),h=this.hh(h,s,o,a,u[c+8],11,-2022574463),a=this.hh(a,h,s,o,u[c+11],16,1839030562),o=this.hh(o,a,h,s,u[c+14],23,-35309556),s=this.hh(s,o,a,h,u[c+1],4,-1530992060),h=this.hh(h,s,o,a,u[c+4],11,1272893353),a=this.hh(a,h,s,o,u[c+7],16,-155497632),o=this.hh(o,a,h,s,u[c+10],23,-1094730640),s=this.hh(s,o,a,h,u[c+13],4,681279174),h=this.hh(h,s,o,a,u[c+0],11,-358537222),a=this.hh(a,h,s,o,u[c+3],16,-722521979),o=this.hh(o,a,h,s,u[c+6],23,76029189),s=this.hh(s,o,a,h,u[c+9],4,-640364487),h=this.hh(h,s,o,a,u[c+12],11,-421815835),a=this.hh(a,h,s,o,u[c+15],16,530742520),o=this.hh(o,a,h,s,u[c+2],23,-995338651),s=this.ii(s,o,a,h,u[c+0],6,-198630844),h=this.ii(h,s,o,a,u[c+7],10,1126891415),a=this.ii(a,h,s,o,u[c+14],15,-1416354905),o=this.ii(o,a,h,s,u[c+5],21,-57434055),s=this.ii(s,o,a,h,u[c+12],6,1700485571),h=this.ii(h,s,o,a,u[c+3],10,-1894986606),a=this.ii(a,h,s,o,u[c+10],15,-1051523),o=this.ii(o,a,h,s,u[c+1],21,-2054922799),s=this.ii(s,o,a,h,u[c+8],6,1873313359),h=this.ii(h,s,o,a,u[c+15],10,-30611744),a=this.ii(a,h,s,o,u[c+6],15,-1560198380),o=this.ii(o,a,h,s,u[c+13],21,1309151649),s=this.ii(s,o,a,h,u[c+4],6,-145523070),h=this.ii(h,s,o,a,u[c+11],10,-1120210379),a=this.ii(a,h,s,o,u[c+2],15,718787259),o=this.ii(o,a,h,s,u[c+9],21,-343485551),s+=e,o+=n,a+=i,h+=r;var l=new f.ByteArray;return(this.digest=l).writeInt(s),l.writeInt(o),l.writeInt(a),l.writeInt(h),l.position=0,p.toHex(s)+p.toHex(o)+p.toHex(a)+p.toHex(h)},e.f=function(t,e,n){return t&e|~t&n},e.g=function(t,e,n){return t&n|e&~n},e.h=function(t,e,n){return t^e^n},e.i=function(t,e,n){return e^(t|~n)},e.transform=function(t,e,n,i,r,s,o,a){var h=Number(t(n,i,r)),u=f.MathU.toInt(e+h+s+a);return p.rol(u,o)+n},e.ff=function(t,e,n,i,r,s,o){return this.transform(this.f,t,e,n,i,r||0,s,o)},e.gg=function(t,e,n,i,r,s,o){return this.transform(this.g,t,e,n,i,r||0,s,o)},e.hh=function(t,e,n,i,r,s,o){return this.transform(this.h,t,e,n,i,r||0,s,o)},e.ii=function(t,e,n,i,r,s,o){return this.transform(this.i,t,e,n,i,r||0,s,o)},e.createBlocks=function(t){for(var e=new Array,n=t.length,i=t.position=0;i<n;i++){var r=8*i,s=(255&t.readByte())<<r%32;e[Number(r>>5)]|=s}return n*=8,e[Number(n>>5)]|=128<<n%32,e[Number(14+(n+64>>>9<<4))]=n,e},e);function e(){}f.MD5=t;var p=(n.rol=function(t,e){return t<<e|t>>>32-e},n.ror=function(t,e){var n=32-e;return t<<n|t>>>32-n},n.toHex=function(t,e){void 0===e&&(e=!1);var n="";if(e)for(var i=0;i<4;i++)n+=this.hexChars.charAt(t>>8*(3-i)+4&15)+this.hexChars.charAt(t>>8*(3-i)&15);else for(var r=0;r<4;r++)n+=this.hexChars.charAt(t>>8*r+4&15)+this.hexChars.charAt(t>>8*r&15);return n},n.hexChars="0123456789abcdef",n);function n(){}f.IntUtil=p}(t.utils||(t.utils={}))}(core=core||{}),function(t){var o,e;function a(){}o=t.utils||(t.utils={}),a.randomRange=function(t,e){return Math.floor((e-t+1)*Math.random())+t},a.randomPointInCicle=function(t,e,n){var i=a.randomRange(e,n),r=360*Math.random(),s=new o.Vector2;return s.x=t.x+Math.sin(r*Math.PI/180)*i,s.y=t.y+Math.cos(r*Math.PI/180)*i,s},a.getDistance=function(t,e,n,i){var r=t-n,s=e-i;return Math.sqrt(r*r+s*s)},a.getAngleTimeT=function(t){return Number(Laya.timer.currTimer%t/t)*Math.PI},a.getAngleByRotaion=function(t){return t%=360,Math.PI*Number(t/180)},a.getAngle=function(t,e,n,i){n-=t,i-=e;var r=Math.atan2(i,n);return r=0<=r?r:2*Math.PI+r},a.getRotation=function(t){return Math.round(180*Number(t/Math.PI))},a.randomBoolen=function(){return 0==Math.round(Math.random())},a.colorMatrix_adjust=function(t,e){var n=t+1,i=128*(1-n);return a.colorMatrix_concat([n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0],[1,0,0,0,e*=255,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0])},a.colorMatrix_concat=function(t,e){for(var n=new Array(20),i=0,r=0;r<4;++r){for(var s=0;s<5;++s)n[i+s]=t[i]*e[s]+t[i+1]*e[s+5]+t[i+2]*e[s+10]+t[i+3]*e[s+15]+(4==s?t[i+4]:0);i+=5}return n},a.parseInt=function(t){return 0<=t?Math.floor(t):Math.ceil(t)},a.toInt=function(t){return this._byteArray||(this._byteArray=new o.ByteArray),this._byteArray.position=0,this._byteArray.writeInt(t),this._byteArray.position=0,this._byteArray.readInt()},a.lerp=function(t,e,n){return 1<n&&(n=1),n<0&&(n=0),t*(1-n)+e*n},e=a,o.MathU=e}(core=core||{}),function(t){var o,e;function n(){}o=t.utils||(t.utils={}),n.loadLangs=function(t,e){for(var n=t.split("\r\n"),i=0;i<n.length;i++){var r=n[i].replace(/\\r/g,"\r"),s=r.indexOf(this.FH_0);if(-1!=s){var o=Number(r.substr(0,s));!e&&this._langs[o]||(this._langs[o]=r.substr(s+1))}}this._langInitial=!0},n.GetLang=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._langInitial){var i=this._langs[t];return i?e.length?(e.unshift(i),o.StringU.substitute.apply(null,e)):i:""}loge("lang not initial please check")},n.loadOprates=function(t,e){for(var n=t.split("\r\n"),i=0;i<n.length;i++){var r=n[i].replace(/\\r/g,"\r"),s=r.indexOf(this.FH_0);if(-1!=s){var o=r.substr(0,s),a=o.indexOf("_");if(-1!=a){var h=Number(o.substr(0,a))<<16|Number(o.substr(a+1));!e&&this._oprates[h]||(this._oprates[h]=r.substr(s+1))}}}this._oprateInitial=!0},n.GetOprate=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this._oprateInitial){var r=t<<16|e,s=this._oprates[r];return s?n.length?(n.unshift(s),o.StringU.substitute.apply(null,n)):s:""}loge("oprate not initial please check")},n.FH_0=":",n._langs={},n._langInitial=!1,n._oprates={},n._oprateInitial=!1,e=n,o.L=e}(core=core||{}),function(t){var e,n;function s(){}e=t.utils||(t.utils={}),s.GetDirect=function(t){var e=t/45;return Math.round(e)%s.MAX_DIRECT},s.GetDirect2=function(t){switch(t){case 0:return s.UP;case 1:return s.UPPER_RIGHT;case 2:return s.RIGHT;case 3:return s.BOTTOM_RIGHT;case 4:return s.BOTTOM;case 5:return s.BOTTOM_LEFT;case 6:return s.LEFT;case 7:return s.UPPER_LEFT}return t},s.AbsDirect=function(t){return(t+8)%s.MAX_DIRECT},s.GetAngle=function(t){return(t+6)%s.MAX_DIRECT*s.ANGLE_RADIANS_45},s.ATan2=function(t,e,n,i){n-=t,i-=e;var r=Math.atan2(i,n);return r=0<=r?r:2*Math.PI+r,r=Math.round(100*r)/100,s.GetDirect(r)},s.RIGHT=0,s.BOTTOM_RIGHT=1,s.BOTTOM=2,s.BOTTOM_LEFT=3,s.LEFT=4,s.UPPER_LEFT=5,s.UP=6,s.UPPER_RIGHT=7,s.MAX_DIRECT=8,s.ANGLE_RADIANS_90=Math.PI/2,s.ANGLE_RADIANS_45=Math.PI/4,s.ANGLE_RADIANS_30=Math.PI/6,s.ANGLE_RADIANS_15=Math.PI/12,s.ANGLE_RADIANS_120=s.ANGLE_RADIANS_90+s.ANGLE_RADIANS_30,s.ANGLE_RADIANS_360=2*Math.PI,n=s,e.Direct=n}(core=core||{}),function(t){!function(t){var i=(e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e);function e(){}t.Endian=i;var n=(r.prototype._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},r.prototype.setdata=function(t){t instanceof r?this._setArrayBuffer(t.buffer):t instanceof ArrayBuffer&&this._setArrayBuffer(t)},Object.defineProperty(r.prototype,"buffer",{get:function(){return this.data.buffer},set:function(t){this.data=new DataView(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dataView",{get:function(){return this.data},set:function(t){this.data=t,this.write_position=t.byteLength},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),r.prototype.getByte=function(t){return this.data.getUint8(t)},r.prototype.setByte=function(t,e){this.data.setUint8(t,e)},Object.defineProperty(r.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position},enumerable:!0,configurable:!0}),r.prototype.reset=function(){this.clear()},Object.defineProperty(r.prototype,"length",{get:function(){return this.write_position},set:function(t){this.validateBuffer(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),r.prototype.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},r.prototype.readBoolean=function(){return 0!=this.data.getUint8(this.position++)},r.prototype.readByte=function(){return this.data.getInt8(this.position++)},r.prototype.readBytes=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);for(var i=0;i<n;i++)t.data.setUint8(i+e,this.data.getUint8(this.position++))},r.prototype.readDouble=function(){var t=this.data.getFloat64(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_FLOAT64,t},r.prototype.readFloat=function(){var t=this.data.getFloat32(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_FLOAT32,t},r.prototype.readInt=function(){var t=this.data.getInt32(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_INT32,t},r.prototype.readInt32=function(){return this.readInt()},r.prototype.getInt32=function(t){return this.data.getInt32(4*t,this.endian==i.LITTLE_ENDIAN)},r.prototype.readShort=function(){var t=this.data.getInt16(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_INT16,t},r.prototype.readInt16=function(){return this.readShort()},r.prototype.readFloatTwoByte=function(t){return this.readShort()/t},r.prototype.readFloatOneByte=function(){return(this.readByte()+128)/256},r.prototype.readUnsignedByte=function(){return this.data.getUint8(this.position++)},r.prototype.readUint8=function(){return this.readUnsignedByte()},r.prototype.readInt8=function(){return this.readByte()},r.prototype.readUnsignedInt=function(){var t=this.data.getUint32(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_UINT32,t},r.prototype.readUint32=function(){return this.readUnsignedInt()},r.prototype.readUint64=function(){return this.readDouble()},r.prototype.readUnsignedShort=function(){var t=this.data.getUint16(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_UINT16,t},r.prototype.readUint16=function(){return this.readUnsignedShort()},r.prototype.readUTF=function(){var t=this.data.getUint16(this.position,this.endian==i.LITTLE_ENDIAN);return this.position+=r.SIZE_OF_UINT16,0<t?this.readUTFBytes(t):""},r.prototype.readString=function(){return this.readUTF()},r.prototype.readUTFBytes=function(t){var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},r.prototype.readStringByLen=function(t){return this.readUTFBytes(t)},r.prototype.writeBoolean=function(t){this.validateBuffer(r.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},r.prototype.writeByte=function(t){this.validateBuffer(r.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},r.prototype.writeUint8=function(t){this.writeByte(t)},r.prototype.writeInt8=function(t){this.writeByte(t)},r.prototype.writeBytes=function(t,e,n){var i;if(void 0===e&&(e=0),void 0===n&&(n=0),!(e<0)&&!(n<0)&&0<(i=0==n?t.length-e:Math.min(t.length-e,n))){this.validateBuffer(i);for(var r=new DataView(t.buffer),s=e;s<i+e;s++)this.data.setUint8(this.position++,r.getUint8(s))}},r.prototype.writeDouble=function(t){this.validateBuffer(r.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_FLOAT64},r.prototype.writeFloat=function(t){this.validateBuffer(r.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_FLOAT32},r.prototype.writeInt=function(t){this.validateBuffer(r.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_INT32},r.prototype.writeInt32=function(t){this.writeInt(t)},r.prototype.setInt32=function(t,e){this.data.setInt32(4*t,e,this.endian==i.LITTLE_ENDIAN)},r.prototype.writeUnsignedShort=function(t){this.validateBuffer(r.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_INT16},r.prototype.writeUint16=function(t){this.writeUnsignedShort(t)},r.prototype.writeUint64=function(t){this.validateBuffer(r.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_FLOAT64},r.prototype.writeShort=function(t){this.validateBuffer(r.SIZE_OF_INT16),this.data.setUint16(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_INT16},r.prototype.writeInt16=function(t){this.writeShort(t)},r.prototype.writeUnsignedInt=function(t){this.validateBuffer(r.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_UINT32},r.prototype.writeUint32=function(t){this.writeUnsignedInt(t)},r.prototype.writeUTF=function(t){var e=this.encodeUTF8(t),n=e.length;this.validateBuffer(r.SIZE_OF_UINT16+n),this.data.setUint16(this.position,n,this.endian===i.LITTLE_ENDIAN),this.position+=r.SIZE_OF_UINT16,this._writeUint8Array(e,!1)},r.prototype.writeString=function(t){var e=new r;e.writeUTFBytes(t),this.writeUint16(e.length+1),this.writeBytes(e,0,e.length),this.writeByte(0)},r.prototype.writeStringByLen=function(t,e){var n=this.position;this.writeUTFBytes(t),this.position=n+e,this.length=this.position+1},r.prototype.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},r.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},r.prototype._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var n=0;n<t.length;n++)this.data.setUint8(this.position++,t[n])},r.prototype.validate=function(t){if(0<this.data.byteLength&&this._position+t<=this.data.byteLength)return!0},r.prototype.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var n=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),i=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);n.set(new Uint8Array(this.data.buffer,0,i)),this.buffer=n.buffer}},r.prototype.encodeUTF8=function(t){for(var e=0,n=this.stringToCodePoints(t),i=[];n.length>e;){var r=n[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))i.push(r);else{var s,o;for(this.inRange(r,128,2047)?(s=1,o=192):this.inRange(r,2048,65535)?(s=2,o=224):this.inRange(r,65536,1114111)&&(s=3,o=240),i.push(this.div(r,Math.pow(64,s))+o);0<s;){var a=this.div(r,Math.pow(64,s-1));i.push(128+a%64),s-=1}}}return new Uint8Array(i)},r.prototype.decodeUTF8=function(t){for(var e,n=0,i="",r=0,s=0,o=0,a=0;t.length>n;){var h=t[n++];if(h===this.EOF_byte)e=0!==s?this.decoderError(!1):this.EOF_code_point;else if(0===s)e=this.inRange(h,0,127)?h:(this.inRange(h,194,223)?(s=1,a=128,r=h-192):this.inRange(h,224,239)?(s=2,a=2048,r=h-224):this.inRange(h,240,244)?(s=3,a=65536,r=h-240):this.decoderError(!1),r*=Math.pow(64,s),null);else if(this.inRange(h,128,191))if(o+=1,r+=(h-128)*Math.pow(64,s-o),o!==s)e=null;else{var u=r,_=a;a=o=s=r=0,e=this.inRange(u,_,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(!1,h)}else a=o=s=r=0,n--,e=this.decoderError(!1,h);null!==e&&e!==this.EOF_code_point&&(e<=65535?0<e&&(i+=String.fromCharCode(e)):(e-=65536,i+=String.fromCharCode(55296+(e>>10&1023)),i+=String.fromCharCode(56320+(1023&e))))}return i},r.prototype.encoderError=function(t){},r.prototype.decoderError=function(t,e){return e||65533},r.prototype.inRange=function(t,e,n){return e<=t&&t<=n},r.prototype.div=function(t,e){return Math.floor(t/e)},r.prototype.stringToCodePoints=function(t){for(var e=[],n=0,i=t.length;n<t.length;){var r=t.charCodeAt(n);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(n===i-1)e.push(65533);else{var s=t.charCodeAt(n+1);if(this.inRange(s,56320,57343)){var o=1023&r,a=1023&s;n+=1,e.push(65536+(o<<10)+a)}else e.push(65533)}else e.push(r);n+=1}return e},Object.defineProperty(r.prototype,"stringValue",{get:function(){var t=[],e=this.length,n=0,i=this.position;for(this.position=n;n<e;)t[n]=this.readByte(),n++;return this.position=i,t.join(",")},set:function(t){this.clear();for(var e=t.split(","),n=e.length,i=0;i<n;)this.writeByte(Number(e[i])),i++;this.position=0},enumerable:!0,configurable:!0}),r.prototype.compress=function(t){void 0===t&&(t="zlib");var e=new Uint8Array(this.buffer),n=new Zlib.Deflate(e).compress();this.buffer=n.buffer,this.position=this.write_position=0,this.length=n.byteLength},r.prototype.uncompress=function(t){void 0===t&&(t="zlib");var e=new Uint8Array(this.buffer),n=new Zlib.Inflate(e).decompress();this.buffer=n.buffer,this.position=this.write_position=0,this.length=n.byteLength},r.SIZE_OF_BOOLEAN=1,r.SIZE_OF_INT8=1,r.SIZE_OF_INT16=2,r.SIZE_OF_INT32=4,r.SIZE_OF_UINT8=1,r.SIZE_OF_UINT16=2,r.SIZE_OF_UINT32=4,r.SIZE_OF_FLOAT32=4,r.SIZE_OF_FLOAT64=8,r);function r(t){this.BUFFER_EXT_SIZE=0,this.optcode=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=i.LITTLE_ENDIAN}t.ByteArray=n}(t.utils||(t.utils={}))}(core=core||{}),function(t){var e,n;function i(){}e=t.utils||(t.utils={}),i.encode=function(t){if(!t||0==t.length)return null;var e,n,i,r,s,o,a,h="",u=0;for(t=this._utf8_encode(t);u<t.length;)r=(e=t.charCodeAt(u++))>>2,s=(3&e)<<4|(n=t.charCodeAt(u++))>>4,o=(15&n)<<2|(i=t.charCodeAt(u++))>>6,a=63&i,isNaN(n)?o=a=64:isNaN(i)&&(a=64),h=h+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a);return h},i.decode=function(t){if(!t||0==t.length)return null;var e,n,i,r,s,o,a="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)e=this._keyStr.indexOf(t.charAt(h++))<<2|(r=this._keyStr.indexOf(t.charAt(h++)))>>4,n=(15&r)<<4|(s=this._keyStr.indexOf(t.charAt(h++)))>>2,i=(3&s)<<6|(o=this._keyStr.indexOf(t.charAt(h++))),a+=String.fromCharCode(e),64!=s&&(a+=String.fromCharCode(n)),64!=o&&(a+=String.fromCharCode(i));return a=this._utf8_decode(a)},i._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):(127<i&&i<2048?e+=String.fromCharCode(i>>6|192):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128)),e+=String.fromCharCode(63&i|128))}return e},i._utf8_decode=function(t){for(var e="",n=0,i=0,r=0,s=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):191<i&&i<224?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),s=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&s),n+=3);return e},i._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i.encodeBytes=function(t){var e,n=new Uint8Array(t),i=n.length,r="";for(e=0;e<i;e+=3)r+=this.chars[n[e]>>2],r+=this.chars[(3&n[e])<<4|n[e+1]>>4],r+=this.chars[(15&n[e+1])<<2|n[e+2]>>6],r+=this.chars[63&n[e+2]];return i%3==2?r=r.substring(0,r.length-1)+"=":i%3==1&&(r=r.substring(0,r.length-2)+"=="),r},i.decodeBytes=function(t){var e,n,i,r,s,o=.75*t.length,a=t.length,h=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),_=new Uint8Array(u);for(e=0;e<a;e+=4)n=this.chars.indexOf(t[e]),i=this.chars.indexOf(t[e+1]),r=this.chars.indexOf(t[e+2]),s=this.chars.indexOf(t[e+3]),_[h++]=n<<2|i>>4,_[h++]=(15&i)<<4|r>>2,_[h++]=(3&r)<<6|63&s;return u},n=i,e.Base64=n}(core=core||{}),function(t){var e,n;function i(){this._bytes=new ByteArray,this._bytes.endian=Endian.LITTLE_ENDIAN}e=t.obj||(t.obj={}),Object.defineProperty(i.prototype,"baseByteArray",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),i.prototype.Clear=function(){this._bytes.clear()},i.prototype.GetBits=function(t,e){void 0===e&&(e=1);for(var n=0;n<e;n++)if(this.GetBit(t+n))return!0;return!1},i.prototype.GetBit=function(t){var e=t>>3;return e<this._bytes.length&&0!=(this._bytes.getByte(e)&1<<(7&t))},i.prototype.SetBit=function(t){var e=t>>3;e>=this._bytes.length&&(this._bytes.length=1+e),this._bytes.setByte(e,this._bytes.getByte(e)|1<<(7&t))},i.prototype.WriteTo=function(t){return this._bytes.position=0,t.writeShort(this._bytes.length),this._bytes.length&&t.writeBytes(this._bytes),!0},i.prototype.ReadFrom=function(t){this._bytes.clear();var e=t.readUnsignedShort();return(this._bytes.length=e)&&t.readBytes(this._bytes,0,e),!0},i.prototype.GetCount=function(){return this._bytes.length<<3},i.prototype.SetCount=function(t){this._bytes.length=t+7>>3},i.prototype.empty=function(){for(var t=0;t<this._bytes.length;t++)if(0!=this._bytes.getByte(t))return!1;return!0},i.prototype.or=function(t){var e=t._bytes.length;this._bytes.length<e&&(this._bytes.length=e);for(var n=0;n<e;n++)this._bytes[n]|=t._bytes[n]},i.prototype.test=function(t){for(var e=this._bytes.length>t._bytes.length?t._bytes.length:this._bytes.length,n=0;n<e;n++)if(this._bytes.getByte(n)&t._bytes.getByte(n))return!0;return!1},i.prototype.condense=function(){for(var t=this._bytes.length;0<t&&(t--,0==this._bytes[t]);)this._bytes.length--},i.prototype.equals=function(t){if(this.condense(),t.condense(),this._bytes.length!=t._bytes.length)return!1;for(var e=0;e<this._bytes.length;e++)if(this._bytes[e]!=t._bytes[e])return!1;return!0},i.prototype.clone=function(){var t=new i;t._bytes.length=this._bytes.length;for(var e=0;e<this._bytes.length;e++)t._bytes.setByte(e,this._bytes.getByte(e));return t},i.prototype.setInt=function(t,e){this._bytes.position=t<<2,this._bytes.writeInt(e)},i.prototype.getInt=function(t){return this._bytes.position=t<<2,this._bytes.readInt()},n=i,e.UpdateMask=n}(core=core||{}),function(t){var e,n;function i(){this._indexerExp=new Array,this._objs=new Array}e=t.obj||(t.obj={}),i.prototype.createIndex=function(t){var e=this.getIndex(t);return-1==e&&(e=this._indexerExp.length,this._indexerExp[e]=new RegExp(t,"g"),this._objs[e]=new Array),e},i.prototype.getIndex=function(t){var e=-1;for(var n in this._indexerExp)if(e++,this._indexerExp[n].source==t)return e;return-1},i.prototype.releaseIndex=function(t){var e=this.getIndex(t);-1!=e&&(this._indexerExp.splice(e,1),this._objs.splice(e,1))},i.prototype.test=function(t){for(var e=0;e<this._indexerExp.length;e++)if(this._indexerExp[e].lastIndex=0,this._indexerExp[e].test(t))return e;return-1},i.prototype.insert=function(t){var e=this.test(t.guid);0<=e&&this._objs[e]&&-1==this._objs[e].indexOf(t)&&(this._objs[e][this._objs[e].length]=t)},i.prototype.remove=function(t){var e=this.test(t);if(-1!=e)for(var n=0;n<this._objs[e].length;n++)if(this._objs[e][n].guid==t)return void this._objs[e].splice(n,1)},i.prototype.query=function(t){var e=this.getIndex(t);return-1==e?null:this._objs[e]},i.prototype.get=function(t){return t<0||t>=this._objs.length?null:this._objs[t]},i.prototype.Clear=function(){this._indexerExp&&(this._indexerExp.length=0,this._indexerExp=null),this._objs&&(this._objs.length=0,this._objs=null)},n=i,e.StringIndexer=n}(core=core||{}),function(t){var e,n;function i(){this.PROTO_TEA_C2S="2f651cbf85539c977da645a90cbd6b62",this.PROTO_MD5_KEY="40f09aa5ff525e8cc3a9d16bf1abc3c1",this.encipher_init(this.PROTO_TEA_C2S)}e=t.net||(t.net={}),i.prototype.encipher_init=function(t){var e=MD5.hash(t),n=new ByteArray;n.writeString(e),n.position=2,this.xor_key_c2s=n.readInt()},i.prototype.encipher_reset=function(t){var e=MD5.hashBinary(t);e+=this.PROTO_MD5_KEY,this.encipher_init(e)},i.prototype.encipher_encode=function(t){if(2==t.length)return 0;var e,n;for(n=t.length>>2,e=0;e<n;e++)t.getInt32(e),t.setInt32(e,t.getInt32(e)^this.xor_key_c2s);return this.xor_key_c2s=MathU.toInt(this.xor_key_c2s+286331153),0},n=i,e.Encipher=n}(core=core||{});var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(n){var i=Laya.Event;n.EV_CONNECT=-100,n.EV_CLOSED=-200,n.EV_ERROR=-300;var e=(t.prototype.add=function(t,e){if(e instanceof ArrayBuffer){var n=e.byteLength;this.total+=n,this.codes[t]|=0,this.codes[t]+=n}},t);function t(){this.codes=[],this.total=0}n.FlowInfo=e;var r,s=(r=Laya.Socket,__extends(o,r),Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sendFlowInfo",{get:function(){return this._sendFlowInfo},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"receiveFlowInfo",{get:function(){return this._receiveFlowInfo},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sendRecordData",{get:function(){return this._sendRecordData},enumerable:!0,configurable:!0}),o.prototype.addCmdFilter=function(t){this._cmdFilter||(this._cmdFilter=[]),-1==this._cmdFilter.indexOf(t)&&this._cmdFilter.push(t)},o.prototype.removeCmdFilter=function(t){if(this._cmdFilter){var e=this._cmdFilter.indexOf(t);-1!=e&&this._cmdFilter.splice(e,1),this._cmdFilter.length||(this._cmdFilter=null)}},Object.defineProperty(o.prototype,"flowStatistics",{set:function(t){t?(this._sendFlowInfo=new e,this._receiveFlowInfo=new e):(this._sendFlowInfo=null,this._receiveFlowInfo=null)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"url",{get:function(){return this._socket?this._socket.url:""},enumerable:!0,configurable:!0}),o.prototype.setRemotePoint=function(t,e){this._address=t,this._port=e},o.prototype.addHanlder=function(t,e,n,i){var r=this._hanlders[t];null==r&&(r=[],this._hanlders[t]=r);for(var s=0,o=r;s<o.length;s++){var a=o[s];if(a.caller==e&&a.method==n)return void(a.dispose=!1)}var h=ObjectPools.malloc(HanlderStruct);h.caller=e,h.method=n,h.args=i,r.push(h)},o.prototype.removeHanlder=function(t,e,n){var i=this._hanlders[t];if(null!=i)for(var r=i.length,s=0;s<r;s++){var o=i[s];o.caller==e&&o.method==n&&(o.dispose=!0)}},o.prototype.isWss=function(){return"https:"==location.href.split("//")[0]},o.prototype.connect=function(){if(!this.connected){if(!this._address||!this._port)return void loge("请先设置IP及端口");if(this.encipher=new n.Encipher,this.isWss()){var t=this._port+1,e=this._address+":"+t;-1==e.indexOf("wss")&&(e="wss://"+this._address+":"+t),this.connectByUrl(e)}else r.prototype.connect.call(this,this._address,this._port)}},o.prototype.sendMsg=function(t,e){this.connected?this._cmdFilter&&-1==this._cmdFilter.indexOf(t)||(this.encipher.encipher_encode(e),this.send(e.buffer),this._sendFlowInfo&&(this._sendFlowInfo.add(t,e.buffer),this._sendRecordData||(this._sendRecordData=[]),10<=this._sendRecordData.length&&this._sendRecordData.shift(),this._sendRecordData.push(t))):this.event(o.SEND_MSG_NOT_CONNECTED,this)},o.prototype.onMessageReveived=function(t){if(t instanceof ArrayBuffer){var e=this._tempBytes;e.setdata(t);var n=e.readUint16();this._receiveFlowInfo&&this._receiveFlowInfo.add(n,t);var i=this.readPacket(n,e);null==i?this.disptchHanlder(n,e):this.disptchHanlder(n,i)}else logd("string"==typeof t?"Network:onMessageReveived "+t:"Network:onMessageReveived msg type unknow");this.input.clear()},o.prototype.readPacket=function(t,e){},o.prototype.disptchHanlder=function(t,e){var n=this._hanlders[t];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i],s=r.dispose;if(!s){var o=void 0;e instanceof ByteArray&&(o=e.position),s=r.method.apply(r.caller,[t,e].concat(r.args)),o&&(e.position=o)}s&&(n.splice(i,1),ObjectPools.free(r),i--)}},o.SEND_MSG_NOT_CONNECTED="SEND_MSG_NOT_CONNECTED",o);function o(t){void 0===t&&(t="");var e=r.call(this)||this;return e._hanlders=[],e._name=t,e._tempBytes=new ByteArray,e.disableInput=!0,e.on(i.OPEN,e,e.disptchHanlder,[n.EV_CONNECT]),e.on(i.CLOSE,e,e.disptchHanlder,[n.EV_CLOSED]),e.on(i.ERROR,e,e.disptchHanlder,[n.EV_ERROR]),e.on(i.MESSAGE,e,e.onMessageReveived),e}n.Network=s}(t.net||(t.net={}))}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(t){t.OBJ_OPT_NEW=1,t.OBJ_OPT_DELETE=2,t.OBJ_OPT_UPDATE=4,t.OBJ_OPT_BINLOG=8,t.OBJ_OPT_U_GUID=16,t.OPT_SET=1,t.OPT_UNSET=2,t.OPT_ADD=4,t.OPT_SUB=8,t.TYPE_UINT32=0,t.TYPE_UINT16=1,t.TYPE_UINT8=2,t.TYPE_BIT=3,t.TYPE_UINT64=4,t.TYPE_INT32=5,t.TYPE_STRING=6,t.TYPE_INT16=7,t.TYPE_INT8=8,t.TYPE_FLOAT=9,t.TYPE_DOUBLE=10,t.ATOMIC_OPT_RESULT_NO=0,t.ATOMIC_OPT_RESULT_TRY=1,t.ATOMIC_OPT_RESULT_OK=2,t.ATOMIC_OPT_RESULT_FAILED=-1;var e,n=(e=Laya.EventDispatcher,__extends(i,e),i.init=function(){(i.tmpValueBytes=new ByteArray).endian=Endian.LITTLE_ENDIAN},i.OBJ_OPT_NEW=1,i.OBJ_OPT_DELETE=2,i.OBJ_OPT_UPDATE=4,i.OBJ_OPT_BINLOG=8,i.OBJ_OPT_U_GUID=16,i.OPT_SET=1,i.OPT_UNSET=2,i.OPT_ADD=4,i.OPT_SUB=8,i.TYPE_UINT32=0,i.TYPE_UINT16=1,i.TYPE_UINT8=2,i.TYPE_BIT=3,i.TYPE_UINT64=4,i.TYPE_INT32=5,i.TYPE_STRING=6,i.TYPE_INT16=7,i.TYPE_INT8=8,i.TYPE_FLOAT=9,i.TYPE_DOUBLE=10,i.ATOMIC_OPT_RESULT_NO=0,i.ATOMIC_OPT_RESULT_TRY=1,i.ATOMIC_OPT_RESULT_OK=2,i.ATOMIC_OPT_RESULT_FAILED=-1,i);function i(){return e.call(this)||this}t.SyncEvent=n}(t.obj||(t.obj={}))}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,n,i;function r(){var t=null!==n&&n.apply(this,arguments)||this;return t._value_u32_buffer=new DataView(new ArrayBuffer(4)),t._old_value_u32_buffer=new DataView(new ArrayBuffer(4)),t}e=t.obj||(t.obj={}),n=e.SyncEvent,__extends(r,n),r.malloc=function(){return 0==r._pool.length?new r:r._pool.pop()},r.free=function(t){t.Clear(),r._pool[r._pool.length]=t},r.prototype.BinLogStru=function(){this.Clear()},Object.defineProperty(r.prototype,"opt",{get:function(){return this._opt},set:function(t){this._opt=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"offset",{get:function(){return this._value_u32_buffer.getUint8(0)},set:function(t){this._value_u32_buffer.setUint8(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"typ",{get:function(){return this._typ},set:function(t){this._typ=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"atomic_opt",{get:function(){return this._atomic_opt},set:function(t){this._atomic_opt=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"callback_idx",{get:function(){return this._callback_index},set:function(t){this._callback_index=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uint32",{get:function(){return this._value_u32_buffer.getUint32(0,!0)},set:function(t){this._typ=e.SyncEvent.TYPE_UINT32,this._value_u32_buffer.setUint32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"int32",{get:function(){if(this._typ!=e.SyncEvent.TYPE_INT32)throw new Error("get int32 but _typ != SyncEvent.TYPE_INT32!");return this._value_u32_buffer.getInt32(0,!0)},set:function(t){this._typ=e.SyncEvent.TYPE_INT32,this._value_u32_buffer.setInt32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bit",{get:function(){if(this._typ!=e.SyncEvent.TYPE_BIT)throw new Error("get bit but _typ != SyncEvent.TYPE_BIT");return this._value_u32_buffer.getUint32(0,!0)},set:function(t){this._typ=e.SyncEvent.TYPE_BIT,this._value_u32_buffer.setUint32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"old_int32",{get:function(){if(this._typ!=e.SyncEvent.TYPE_INT32)throw new Error("get int32 but _typ != SyncEvent.TYPE_INT32!");return this._old_value_u32_buffer.getInt32(0,!0)},set:function(t){if(this._typ!=e.SyncEvent.TYPE_INT32)throw new Error("get int32 but _typ != SyncEvent.TYPE_INT32!");this._old_value_u32_buffer.setInt32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uint16",{get:function(){if(this._typ!=e.SyncEvent.TYPE_UINT16)throw new Error("get uint16 but _typ != SyncEvent.TYPE_UINT16!");return this._value_u32_buffer.getUint16(2,!0)},set:function(t){this._typ=e.SyncEvent.TYPE_UINT16,this._value_u32_buffer.setUint16(2,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"int16",{get:function(){if(this._typ!=e.SyncEvent.TYPE_INT16)throw new Error("get int16 but _typ != SyncEvent.TYPE_INT16!");return this._value_u32_buffer.getInt16(2,!0)},set:function(t){this._typ=e.SyncEvent.TYPE_INT16,this._value_u32_buffer.setInt16(2,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"byte",{get:function(){if(this._typ!=e.SyncEvent.TYPE_UINT8)throw new Error("get uint8 but _typ != SyncEvent.TYPE_UINT8!");return this._value_u32_buffer.getInt8(2)},set:function(t){this._typ=e.SyncEvent.TYPE_UINT8,this._value_u32_buffer.setInt8(2,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"double",{get:function(){return this._value_dbe},set:function(t){this._value_dbe=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"float",{get:function(){return this._value_u32_buffer.getFloat32(0,!0)},set:function(t){this._value_u32_buffer.setFloat32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"str",{get:function(){if(this._typ!=e.SyncEvent.TYPE_STRING)throw new Error("get str but _typ != SyncEvent.TYPE_STRING!");return this._value_str},set:function(t){this._typ=e.SyncEvent.TYPE_STRING,this._value_str=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"old_str",{get:function(){if(this._typ!=e.SyncEvent.TYPE_STRING)throw new Error("get old_str but _typ != SyncEvent.TYPE_STRING!");return this._old_value_str},set:function(t){if(this._typ!=e.SyncEvent.TYPE_STRING)throw new Error("set old_str but _typ != SyncEvent.TYPE_STRING!");this._old_value_str=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._value_u32_buffer.getUint32(0,!0)},set:function(t){this._value_u32_buffer.setUint32(0,t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"old_value",{get:function(){return this._old_value_u32_buffer.getUint32(0,!0)},set:function(t){this._old_value_u32_buffer.setUint32(0,t,!0)},enumerable:!0,configurable:!0}),r.prototype.Clear=function(){this._opt=0,this._typ=0,this._index=0,this._atomic_opt=e.SyncEvent.ATOMIC_OPT_RESULT_NO,this._value_u32_buffer.setUint32(0,0,!0),this._value_dbe=0,this._value_str="",this._callback_index=0,this._old_value_u32_buffer.setUint32(0,0,!0),this._old_value_dbe=0,this._old_value_str=""},r.prototype.ReadFrom=function(t){return this._opt=t.readUnsignedByte(),this._typ=t.readUnsignedByte(),this._index=t.readShort(),this._atomic_opt=t.readByte(),this._typ==e.SyncEvent.TYPE_STRING?this._value_str=t.readUTF():this._typ==e.SyncEvent.TYPE_DOUBLE?this._value_dbe=t.readDouble():this.value=t.readUnsignedInt(),this._atomic_opt&&(this._callback_index=t.readUnsignedInt(),this._typ==e.SyncEvent.TYPE_STRING?this._old_value_str=t.readUTF():this._typ==e.SyncEvent.TYPE_DOUBLE?this._old_value_dbe=t.readDouble():this.old_value=t.readUnsignedInt()),!0},r.prototype.WriteTo=function(t){t.writeByte(this._opt),t.writeByte(this._typ),t.writeShort(this._index),t.writeByte(this._atomic_opt),this._typ==e.SyncEvent.TYPE_STRING?t.writeUTF(this._value_str?this._value_str:""):this._typ==e.SyncEvent.TYPE_DOUBLE?t.writeDouble(this._value_dbe):t.writeUnsignedInt(this.value),this._atomic_opt&&(t.writeUnsignedInt(this._callback_index),this._typ==e.SyncEvent.TYPE_STRING?t.writeUTF(this._old_value_str?this._old_value_str:""):this._typ==e.SyncEvent.TYPE_DOUBLE?t.writeDouble(this._old_value_dbe):t.writeUnsignedInt(this.old_value))},r.prototype.clone=function(){var t=r.malloc();return t._opt=this._opt,t._typ=this._typ,t._index=this._index,t._atomic_opt=this._atomic_opt,t.value=this.value,t._value_dbe=this._value_dbe,t._value_str=this._value_str,t._callback_index=this._callback_index,t.old_value=this.old_value,t._old_value_dbe=this._old_value_dbe,t._old_value_str=this._old_value_str,t},r._pool=new Array,i=r,e.BinLogStru=i}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var a,e,n;function o(){var t=e.call(this)||this;return t._int_binlog_array=new Array,t._str_binlog_array=new Array,t._uint32_values_len=0,t._str_values_len=0,t._str_values=new Array,t._guid="",t._u_guid=0,t._tmpBinlog=new a.BinLogStru,o.addListens_mask||(o.addListens_mask=new a.UpdateMask),o.tmpIntMask||(o.tmpIntMask=new a.UpdateMask),o.tmpStrMask||(o.tmpStrMask=new a.UpdateMask),t._events_value=new a.NetEventDispatcher,t._events_str_values=new a.NetEventDispatcher,t._events_mask=new a.NetEventDispatcher(a.NetEventDispatcher.KEY_TYPE_INT_MASK),t._events_callback=new a.NetEventDispatcher,t._uint32_values_buffer=new DataView(new ArrayBuffer(0)),t}a=t.obj||(t.obj={}),e=a.SyncEvent,__extends(o,e),Object.defineProperty(o.prototype,"guid",{get:function(){return this._guid},set:function(t){this._guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oid",{get:function(){return this._u_guid},set:function(t){this._u_guid=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fieldCountOpen",{set:function(t){this.fieldChangeData=t?new Object:null},enumerable:!0,configurable:!0}),o.prototype.Reset=function(){this._events_value.Clear(),this._events_str_values.Clear(),this._events_callback.Clear(),this.clearValues()},o.prototype.clearValues=function(){this._uint32_values_len=0,this._uint32_values_buffer=new DataView(new ArrayBuffer(0)),this._str_values_len=0,this._str_values.length=this._str_values_len},o.prototype.checkIntSize=function(t){for(var e=!1;t>=this._uint32_values_len;)this._uint32_values_len+=8,e=!0;if(e){var n=new Uint8Array(new ArrayBuffer(this._uint32_values_len<<2));n.set(new Uint8Array(this._uint32_values_buffer.buffer,0,this._uint32_values_buffer.buffer.byteLength)),this._uint32_values_buffer=new DataView(n.buffer)}},o.prototype.checkStrSize=function(t){for(;t>=this._str_values_len;)this._str_values_len+=8,this._str_values.length=this._str_values_len},o.prototype.OnEventSyncBinLog=function(t){this._after_update&&(t.typ==a.SyncEvent.TYPE_STRING?o.tmpStrMask.SetBit(t.index):o.tmpIntMask.SetBit(t.index)),t.atomic_opt?this._events_callback.DispatchInt(t.callback_idx,t):t.typ==a.SyncEvent.TYPE_STRING?this._events_str_values.DispatchInt(t.index,t):this._events_value.DispatchInt(t.index,t)},o.prototype.AddListen=function(t,e,n){this._events_value.AddListenInt(t,e,n)},o.prototype.AddListens=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];o.addListens_mask.Clear();for(var s=0;s<i.length;s++)o.addListens_mask.SetBit(t+i[s]);this._events_mask.AddListenIntMask(o.addListens_mask,e,n)},o.prototype.AddListensSeq=function(t,e,n,i){o.addListens_mask.Clear();for(var r=t;r<=e;r++)o.addListens_mask.SetBit(r);this._events_mask.AddListenIntMask(o.addListens_mask,n,i)},o.prototype.removeListene=function(t,e,n){void 0===n&&(n=null),this._events_value.removeListenerInt(t,e,n)},o.prototype.removeListenes=function(t,e,n){void 0===n&&(n=null);for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];o.addListens_mask.Clear();for(var s=0;s<i.length;s++)o.addListens_mask.SetBit(t+i[s]);this._events_mask.removeListenerUpdateMask(o.addListens_mask,e,n)},o.prototype.removeListenesSeq=function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),o.addListens_mask.Clear();for(var r=t;r<=e;r++)o.addListens_mask.SetBit(r);this._events_mask.removeListenerUpdateMask(o.addListens_mask,n,i)},o.prototype.AddListenString=function(t,e,n){this._events_str_values.AddListenInt(t,e,n)},o.prototype.removeListeneString=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this._events_str_values.removeListenerInt(t,e,n)},o.prototype.GetDouble=function(t){return t+1<this._uint32_values_len?this._uint32_values_buffer.getFloat64(t<<2,!0):0},o.prototype.GetUInt32=function(t){return t<this._uint32_values_len?this._uint32_values_buffer.getUint32(t<<2,!0):0},o.prototype.GetInt32=function(t){return t<this._uint32_values_len?this._uint32_values_buffer.getInt32(t<<2,!0):0},o.prototype.GetUInt16=function(t,e){return t<this._uint32_values_len?this._uint32_values_buffer.getUint16((t<<2)+(e<<1),!0):0},o.prototype.GetInt16=function(t,e){return t<this._uint32_values_len?this._uint32_values_buffer.getInt16((t<<2)+(e<<1),!0):0},o.prototype.GetFloat=function(t){return t<this._uint32_values_len?this._uint32_values_buffer.getFloat32(t<<2,!0):0},o.prototype.GetByte=function(t,e){return t<this._uint32_values_len?this._uint32_values_buffer.getUint8((t<<2)+e):0},o.prototype.GetUInt8=function(t,e){return t<this._uint32_values_len?this._uint32_values_buffer.getUint8((t<<2)+e):0},o.prototype.GetBit=function(t,e){return(t+=e>>5)<this._uint32_values_len&&Boolean(this._uint32_values_buffer.getUint32(t<<2,!0)>>(31&e)&1)},o.prototype.GetStr=function(t){return t<this._str_values_len&&this._str_values[t]||""},o.prototype.SetDouble=function(t,e){this.checkIntSize(t+1),this._uint32_values_buffer.setFloat64(t<<2,e,!0)},o.prototype.AddDouble=function(t,e){this.checkIntSize(t+1),this.SetDouble(t,this.GetDouble(t)+e)},o.prototype.SubDouble=function(t,e){this.checkIntSize(t+1),this.SetDouble(t,this.GetDouble(t)-e)},o.prototype.SetUInt32=function(t,e){this.checkIntSize(t),this._uint32_values_buffer.setUint32(t<<2,e,!0)},o.prototype.AddUInt32=function(t,e){this.SetUInt32(t,this.GetUInt32(t)+e)},o.prototype.SubUInt32=function(t,e){this.SetUInt32(t,this.GetUInt32(t)-e)},o.prototype.SetInt32=function(t,e){this.checkIntSize(t),this._uint32_values_buffer.setInt32(t<<2,e,!0)},o.prototype.AddInt32=function(t,e){this.SetInt32(t,this.GetInt32(t)+e)},o.prototype.SubInt32=function(t,e){this.SetInt32(t,this.GetInt32(t)-e)},o.prototype.SetUInt16=function(t,e,n){this.checkIntSize(t),this._uint32_values_buffer.setUint16((t<<2)+(e<<1),n,!0)},o.prototype.AddUInt16=function(t,e,n){this.checkIntSize(t),this.SetUInt16(t,e,this.GetUInt16(t,e)+n)},o.prototype.SubUInt16=function(t,e,n){this.checkIntSize(t),this.SetUInt16(t,e,this.GetUInt16(t,e)-n)},o.prototype.SetInt16=function(t,e,n){this.checkIntSize(t),this._uint32_values_buffer.setInt16((t<<2)+(e<<1),n,!0)},o.prototype.AddInt16=function(t,e,n){this.SetInt16(t,e,this.GetInt16(t,e)+n)},o.prototype.SubInt16=function(t,e,n){this.SetInt16(t,e,this.GetInt16(t,e)-n)},o.prototype.SetFloat=function(t,e){this.checkIntSize(t),this._uint32_values_buffer.setFloat32(t<<2,e,!0)},o.prototype.SetByte=function(t,e,n){this.checkIntSize(t),this._uint32_values_buffer.setInt8((t<<2)+e,n)},o.prototype.AddByte=function(t,e,n){this.SetByte(t,e,this.GetByte(t,e)+n)},o.prototype.SubByte=function(t,e,n){this.SetByte(t,e,this.GetByte(t,e)-n)},o.prototype.SetStr=function(t,e){this.checkStrSize(t),this._str_values[t]=e},o.prototype.SetBit=function(t,e){t+=e>>5,e&=31,this.checkIntSize(t);var n=this._uint32_values_buffer.getUint32(t<<2,!0);n|=1<<e,this._uint32_values_buffer.setUint32(t<<2,n,!0)},o.prototype.UnSetBit=function(t,e){t+=e>>5,e&=31,this.checkIntSize(t);var n=this._uint32_values_buffer.getUint32(t<<2,!0);n&=~(1<<e),this._uint32_values_buffer.setUint32(t<<2,n,!0)},o.prototype.ReadValues=function(t,e,n){for(var i=t.GetCount(),r=0;r<i;r++)if(t.GetBit(r)){this.checkIntSize(r);var s=n?null:a.BinLogStru.malloc();s&&(s.typ=a.SyncEvent.TYPE_UINT32,s.index=r,s.old_value=this.GetUInt32(r));var o=e.readUnsignedInt();this.SetUInt32(r,o),s&&(s.value=this.GetUInt32(r),this.AddBinlogStru(this._int_binlog_array,s))}return!0},o.prototype.ReadStringValues=function(t,e,n){for(var i=t.GetCount(),r=0;r<i;r++)if(t.GetBit(r)){this.checkStrSize(r);var s=n?null:a.BinLogStru.malloc();s&&(s.index=r,s.typ=a.SyncEvent.TYPE_STRING,s.old_str=this._str_values[r]),this._str_values[r]=e.readUTF(),s&&(s.str=this._str_values[r],this.AddBinlogStru(this._str_binlog_array,s))}return!0},o.prototype.GetCreateMask=function(t){t.Clear();for(var e=0;e<this._uint32_values_len;e++)this.GetUInt32(e)&&t.SetBit(e)},o.prototype.GetCreateStringMask=function(t){t.Clear();for(var e=0;e<this._str_values_len;e++)this._str_values[e]&&0<this._str_values[e].length&&t.SetBit(e)},o.prototype.ApplyAtomicBinLog=function(t){if(t.atomic_opt!=a.SyncEvent.ATOMIC_OPT_RESULT_FAILED&&t.atomic_opt!=a.SyncEvent.ATOMIC_OPT_RESULT_OK){if(t._typ==a.SyncEvent.TYPE_STRING)return this.checkStrSize(t._index),void(t._old_value_str!=this._str_values[t._index]?(t._old_value_str=t._value_str,t._value_str=this._str_values[t._index],t._atomic_opt=a.SyncEvent.ATOMIC_OPT_RESULT_FAILED):(t._atomic_opt=a.SyncEvent.ATOMIC_OPT_RESULT_OK,this.ApplyBinLog(t)));this.checkIntSize(t._index);var e=this.GetUInt32(t.index);t.old_value!=e?(t.old_value=t.value,t.value=e,t._atomic_opt=a.SyncEvent.ATOMIC_OPT_RESULT_FAILED):(t._atomic_opt=a.SyncEvent.ATOMIC_OPT_RESULT_OK,this.ApplyBinLog(t))}else this._events_callback.DispatchInt(t.callback_idx,t)},o.prototype.ApplyBinLog=function(t){var e=t.index;if(t._typ==a.SyncEvent.TYPE_STRING)return this.checkStrSize(e),t.old_str=this._str_values[e]?this._str_values[e]:"",this._str_values[e]=t._value_str,this.AddBinlogStru(this._str_binlog_array,t.clone()),void o.tmpStrMask.SetBit(t.index);if(this.AddBinlogStru(this._int_binlog_array,t.clone()),o.tmpIntMask.SetBit(t.index),t.typ==a.SyncEvent.TYPE_DOUBLE?(this._uint32_values_len>e+1&&(t._old_value_dbe=this.GetDouble(e)),this.checkIntSize(e+1)):(t.typ!=a.SyncEvent.TYPE_BIT&&this._uint32_values_len>e&&(t.old_value=this.GetUInt32(e)),this.checkIntSize(e)),t.typ==a.SyncEvent.TYPE_UINT32||t.typ==a.SyncEvent.TYPE_INT32||t.typ==a.SyncEvent.TYPE_FLOAT)switch(t.opt){case a.SyncEvent.OPT_SET:this.SetUInt32(e,t.uint32);break;case a.SyncEvent.OPT_ADD:this.AddUInt32(e,t.uint32);break;case a.SyncEvent.OPT_SUB:this.SubUInt32(e,t.uint32)}else if(t.typ==a.SyncEvent.TYPE_DOUBLE)switch(t.opt){case a.SyncEvent.OPT_SET:this.SetDouble(e,t.double);break;case a.SyncEvent.OPT_ADD:this.AddDouble(e,t.double);break;case a.SyncEvent.OPT_SUB:this.SubDouble(e,t.double)}else if(t.typ==a.SyncEvent.TYPE_BIT)switch(t.opt){case a.SyncEvent.OPT_SET:this.SetBit(e,t.uint32);break;case a.SyncEvent.OPT_UNSET:this.UnSetBit(e,t.uint32);break;default:throw Error("BinLogObject_BIT:op type is error.")}else switch(t.typ){case a.SyncEvent.TYPE_UINT16:switch(t.opt){case a.SyncEvent.OPT_SET:this.SetUInt16(e,t.offset,t.uint16);break;case a.SyncEvent.OPT_ADD:this.AddUInt16(e,t.offset,t.uint16);break;case a.SyncEvent.OPT_SUB:this.SubUInt16(e,t.offset,t.uint16);break;default:throw Error("BinLogObject_UINT16:unknow OP type")}break;case a.SyncEvent.TYPE_INT16:switch(t.opt){case a.SyncEvent.OPT_SET:this.SetInt16(e,t.offset,t.int16);break;case a.SyncEvent.OPT_ADD:this.AddInt16(e,t.offset,t.int16);break;case a.SyncEvent.OPT_SUB:this.SubInt16(e,t.offset,t.int16);break;default:throw Error("BinLogObject_UINT16:unknow OP type")}break;case a.SyncEvent.TYPE_UINT8:switch(t.opt){case a.SyncEvent.OPT_SET:this.SetByte(e,t.offset,t.byte);break;case a.SyncEvent.OPT_ADD:this.AddByte(e,t.offset,t.byte);break;case a.SyncEvent.OPT_SUB:this.SubByte(e,t.offset,t.byte);break;default:throw Error("BinLogObject_UINT8:op type is error.")}break;default:throw Error("BinLogObject:op type is error.")}},o.prototype.AddBinlogStru=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.index==e.index)return t[n]=e,void a.BinLogStru.free(i)}t.push(e)},o.prototype.DispatchIndex=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];t.DispatchInt(i.index,i),a.BinLogStru.free(i)}e.length=0},o.prototype.ReadFrom=function(t,e){var n=Boolean(t&a.SyncEvent.OBJ_OPT_NEW);if(n&&this.clearValues(),(n||t&a.SyncEvent.OBJ_OPT_UPDATE)&&(o.tmpIntMask.ReadFrom(e),o.tmpStrMask.ReadFrom(e),this.ReadValues(o.tmpIntMask,e,n),this.ReadStringValues(o.tmpStrMask,e,n),null!=this._after_update&&this._after_update(t,o.tmpIntMask,o.tmpStrMask),this.DispatchIndex(this._events_value,this._int_binlog_array),this.DispatchIndex(this._events_str_values,this._str_binlog_array),this._events_mask.DispatchIntMask(o.tmpIntMask,this)),t&a.SyncEvent.OBJ_OPT_BINLOG){o.tmpIntMask.Clear(),o.tmpStrMask.Clear();for(var i=e.readUnsignedShort(),r=0;r<i;r++)this._tmpBinlog.ReadFrom(e),this._tmpBinlog._atomic_opt?this.ApplyAtomicBinLog(this._tmpBinlog):this.ApplyBinLog(this._tmpBinlog);null!=this._after_update&&this._after_update(t,o.tmpIntMask,o.tmpStrMask),this.DispatchIndex(this._events_value,this._int_binlog_array),this.DispatchIndex(this._events_str_values,this._str_binlog_array),this._events_mask.DispatchIntMask(o.tmpIntMask,this)}return n&&this.onBaseCreated(),!0},o.prototype.onBaseCreated=function(){},o.prototype.WriteCreateBlock=function(t,e,n){var i=a.OBJ_OPT_NEW;this._u_guid&&(i|=a.OBJ_OPT_U_GUID),t.writeByte(i),i&a.OBJ_OPT_U_GUID&&t.writeUnsignedInt(this._u_guid),t.writeUTF(this._guid);var r=e||new a.UpdateMask,s=n||new a.UpdateMask;this.GetCreateMask(r),r.WriteTo(t),this.GetCreateStringMask(s),s.WriteTo(t),this.WriteValues(r,t),this.WriteStringValues(s,t)},o.prototype.WriteValues=function(t,e){for(var n=t.GetCount(),i=0;i<n;i++)t.GetBit(i)&&e.writeInt(this._uint32_values_buffer.getInt32(i<<2,!0))},o.prototype.WriteStringValues=function(t,e){for(var n=t.GetCount(),i=0;i<n;i++)t.GetBit(i)&&e.writeUTF(this._str_values[i])},o.prototype.GetHashCode=function(){for(var t=2166136261,e=16777619,n=t,i=0;i<this._uint32_values_len;i++)n^=this.GetUInt32(i),n*=e;var r=new ByteArray;r.endian=Endian.LITTLE_ENDIAN;var s=t;for(r.writeUTFBytes(this._guid),i=0;i<r.length;i++)s^=r.getByte(i),s*=e;for(var o in this._str_values)for(r.clear(),r.writeUTFBytes(o||""),i=0;i<r.length;i++)s^=r[i],s*=e;return n^s<<1},o.prototype.Equals=function(t){return this._uint32_values_len>t._uint32_values_len?t.checkIntSize(this._uint32_values_len):this._uint32_values_len<t._uint32_values_len&&this.checkIntSize(t._uint32_values_len),this._str_values_len>t._str_values_len?t.checkStrSize(this._str_values_len):this._str_values_len>t._str_values_len&&this.checkStrSize(t._str_values_len),this.GetHashCode()==t.GetHashCode()},o.prototype.tostring=function(){for(var t="",e=0;e<this._uint32_values_len;e++)t=t+this.GetUInt32(e)+" ";var n="";for(e=0;e<this._str_values_len;e++)n=n+this.GetStr(e)+" ";return[this.guid,t,n]},o.prototype.dispose=function(){this.clearValues(),this._events_value.Clear(),this._events_str_values.Clear(),this._events_mask.Clear(),this._events_callback.Clear(),this._after_update=null},n=o,a.GuidObject=n}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var s,e,n;function o(){var t=e.call(this)||this;return t._objs=new Object,t._hashGUID=null,t._u_2_guid=new Object,t._packet_pool=new Array,o.applyBlock_tmp_obj||(o.applyBlock_tmp_obj=new s.GuidObject),t._newEvent=new s.NetEventDispatcher(s.NetEventDispatcher.KEY_TYPE_STRING),t._delEvent=new s.NetEventDispatcher(s.NetEventDispatcher.KEY_TYPE_STRING),t._indexer=new s.StringIndexer,t}s=t.obj||(t.obj={}),e=s.SyncEvent,__extends(o,e),o.prototype.Get=function(t){return this._objs[t]},Object.defineProperty(o.prototype,"indexer",{get:function(){return this._indexer},enumerable:!0,configurable:!0}),o.prototype.CreateObject=function(t,e){var n=this._objs[t];return n||((n=new s.GuidObject).guid=t,n.oid=e),this.AttachObject(n),n},o.prototype.ReleaseObject=function(t){this.DetachObject(t),t.dispose()},o.prototype.ReleaseKey=function(t){var e=this._objs[t];e?this.ReleaseObject(e):logw("GuidObjectTable.ReleaseKey p is null")},o.prototype.AttachObject=function(t){null==t&&loge("AttachObject,o==null"),this._objs[t.guid]=t,this._indexer.insert(t),0!=t.oid&&(this._u_2_guid[t.oid]=t.guid)},o.prototype.DetachObject=function(t){this._indexer.remove(t.guid),delete this._objs[t.guid];var e=t.oid;0!=e&&delete this._u_2_guid[e]},o.prototype.ApplyBlock=function(t){for(;t.bytesAvailable;){var e,n=t.readUnsignedByte(),i=0;e=n&s.SyncEvent.OBJ_OPT_U_GUID?(i=t.readUnsignedShort(),n&s.SyncEvent.OBJ_OPT_NEW?t.readUTF():this._u_2_guid[i]?this._u_2_guid[i]:""):t.readUTF();var r=this.Get(e);n&s.SyncEvent.OBJ_OPT_DELETE?this.removeObject(e,r):((r=r||(n&s.SyncEvent.OBJ_OPT_NEW?this.CreateObject(e,i):o.applyBlock_tmp_obj))!=o.applyBlock_tmp_obj&&(r.oid=i),r.ReadFrom(n,t),n&s.SyncEvent.OBJ_OPT_NEW&&this._newEvent.DispatchString(r.guid.charAt(0),r))}return!0},o.prototype.SearchObject=function(t,e){var n=new RegExp(t);for(var i in e.length=0,this._objs)n.test(i)&&e.push(i)},o.prototype.ForEachObject=function(t){for(var e in this._objs)t(this._objs[e])},o.prototype.RegisterCreateEvent=function(t,e,n){this._newEvent.AddListenString(t,e,n)},o.prototype.RegisterReleaseEvent=function(t,e,n){this._delEvent.AddListenString(t,e,n)},o.prototype.newPacket=function(t){void 0===t&&(t=0);var e=null;return 0==this._packet_pool.length?(e=new ByteArray).endian=Endian.LITTLE_ENDIAN:(e=this._packet_pool.shift()).clear(),t&&e.writeShort(t),e},o.prototype.freePacket=function(t){t.clear(),this._packet_pool.push(t)},o.prototype.clearObjs=function(){for(var t in this._objs){if(this._objs[t]instanceof s.GuidObject){var e=this._objs[t];this.removeObject(e.guid,e)}delete this._objs[t]}},o.prototype.removeObject=function(t,e){this._delEvent.DispatchString(t,e),this.ReleaseKey(t)},o.prototype.saveObjsToString=function(){var t=new ByteArray;for(var e in this._objs)this._objs[e].WriteCreateBlock(t);return t.stringValue},o.prototype.loadObjsFormString=function(t){var e=new ByteArray;e.stringValue=t,this.ApplyBlock(e)},o.prototype.dispose=function(){for(var t in this._newEvent.Clear(),this._delEvent.Clear(),this._indexer.Clear(),this._objs){var e=this._objs[t];e&&e.dispose()}},n=o,s.GuidObjectTable=n}(core=core||{}),function(t){!function(t){var s=(e.prototype.intoPool=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.caller=null,this.method=null,this.args=null,this.dispose=!1},e.prototype.outPool=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e);function e(){this.dispose=!1,this.poolName="HanlderStruct"}t.HanlderStruct=s;var n=(o.prototype.DispatchIndex=function(t){var e;if(this._event_key_type==o.KEY_TYPE_STRING||this._event_key_type==o.KEY_TYPE_INT||this._event_key_type==o.KEY_TYPE_INT_MASK)for(e in this._event_index){var n=this._event_callback[this._event_index[e]];n.method.call(n.caller,t)}},o.prototype.DispatchString=function(t,e){if(this._event_key_type!=o.KEY_TYPE_STRING)throw new Error("this.DispatchIndex/this._event_key_type != NetEventDispatcher.KEY_TYPE_STRING");this._event_index.length=0;for(var n=this._event_callback.length,i=0;i<n;i++)t==this._event_id_str[i]&&this._event_index.unshift(i);this._event_index.length&&this.DispatchIndex(e)},o.prototype.DispatchInt=function(t,e){if(this._event_key_type!=o.KEY_TYPE_INT)throw new Error("this.DispatchIndex/this._event_key_type != NetEventDispatcher.KEY_TYPE_INT");this._event_index.length=0;for(var n=this._event_callback.length,i=0;i<n;i++)t==this._event_id_int[i]&&this._event_index.unshift(i);this._event_index.length&&this.DispatchIndex(e)},o.prototype.DispatchIntMask=function(t,e){if(this._event_key_type!=o.KEY_TYPE_INT_MASK)throw new Error("this.DispatchIndex/this._event_key_type != NetEventDispatcher.KEY_TYPE_INT_MASK");this._event_index.length=0;for(var n=this._event_callback.length,i=0;i<n;i++)this._event_id_int_mask[i].test(t)&&this._event_index.unshift(i);this._event_index.length&&this.DispatchIndex(e)},o.prototype.Dispatch=function(t,e){this._event_index.length=0;for(var n=this._event_callback.length,i=0;i<n;i++)e(this._event_id_int[i],t)&&this._event_index.unshift(i);this._event_index.length&&this.DispatchIndex(t)},o.prototype.AddListenInt=function(t,e,n){if(this._event_key_type!=o.KEY_TYPE_INT)throw new Error("AddListenInt but (this._event_key_type != NetEventDispatcher.KEY_TYPE_INT)");for(var i=0;i<this._event_id_int.length;i++)if(this._event_id_int[i]==t&&this._event_callback[i].caller==e&&this._event_callback[i].method==n)return;this._event_id_int.push(t);var r=ObjectPools.malloc(s);r.caller=e,r.method=n,this._event_callback.push(r)},o.prototype.AddListenString=function(t,e,n){if(this._event_key_type!=o.KEY_TYPE_STRING)throw new Error("AddListenString but (this._event_key_type != NetEventDispatcher.KEY_TYPE_STRING)");for(var i=0;i<this._event_id_str.length;i++)if(this._event_id_str[i]==t&&this._event_callback[i].caller==e&&this._event_callback[i].method==n)return;this._event_id_str.push(t);var r=ObjectPools.malloc(s);r.caller=e,r.method=n,this._event_callback.push(r)},o.prototype.AddListenIntMask=function(t,e,n){if(this._event_key_type!=o.KEY_TYPE_INT_MASK)throw new Error("AddListenString but (this._event_key_type != NetEventDispatcher.KEY_TYPE_INT_MASK)");for(var i=0;i<this._event_id_int_mask.length;i++)if(this._event_id_int_mask[i].equals(t)&&this._event_callback[i].caller==e&&this._event_callback[i].method==n)return;this._event_id_int_mask.push(t.clone());var r=ObjectPools.malloc(s);r.caller=e,r.method=n,this._event_callback.push(r)},o.prototype.removeListenerInt=function(t,e,n){if(void 0===n&&(n=null),this._event_key_type!=o.KEY_TYPE_INT)throw new Error("removeListenerInt but (this._event_key_type != NetEventDispatcher.KEY_TYPE_INT)");for(var i=0;i<this._event_id_int.length;){if(this._event_id_int[i]==t){var r=this._event_callback[i];if(null==n||r.caller==e&&r.method==n){this._event_id_int.splice(i,1),this._event_callback.splice(i,1),ObjectPools.free(r);continue}}i++}},o.prototype.removeListenerString=function(t,e,n){if(void 0===n&&(n=null),this._event_key_type!=o.KEY_TYPE_STRING)throw new Error("removeListenerString but (this._event_key_type != NetEventDispatcher.KEY_TYPE_STRING)");for(var i=0;i<this._event_id_str.length;){if(this._event_id_str[i]==t){var r=this._event_callback[i];if(null==n||r.caller==e&&r.method==n){this._event_id_str.splice(i,1),this._event_callback.splice(i,1),ObjectPools.free(r);continue}}i++}},o.prototype.removeListenerUpdateMask=function(t,e,n){if(void 0===n&&(n=null),this._event_key_type!=o.KEY_TYPE_INT_MASK)throw new Error("removeListenerUpdateMask but ()");for(var i=0;i<this._event_id_int_mask.length;){if(this._event_id_int_mask[i].equals(t)){var r=this._event_callback[i];if(null==n||r.caller==e&&r.method==n){this._event_id_int_mask.splice(i,1),this._event_callback.splice(i,1),ObjectPools.free(r);continue}}i++}},o.prototype.AddCallback=function(t,e){if(this._event_key_type==o.KEY_TYPE_STRING)throw new Error("AddCallback but (this._event_key_type == NetEventDispatcher.KEY_TYPE_STRING)");var n=this._callback_index+1;for(var i in n=this._callback_index+1,this._event_id_int)0!=n&&Number(i);return this._callback_index=n,this.AddListenInt(n,t,e),n},o.prototype.Clear=function(){this._event_callback&&(this._event_callback.length=0),this._event_id_int&&(this._event_id_int.length=0),this._event_id_str&&(this._event_id_str.length=0),this._event_index&&(this._event_index.length=0),this._event_id_int_mask&&(this._event_id_int_mask.length=0)},o.KEY_TYPE_INT=0,o.KEY_TYPE_STRING=1,o.KEY_TYPE_INT_MASK=2,o);function o(t){void 0===t&&(t=0),this._callback_index=0,(this._event_key_type=t)==o.KEY_TYPE_STRING?this._event_id_str=new Array:t==o.KEY_TYPE_INT?this._event_id_int=new Array:t==o.KEY_TYPE_INT_MASK&&(this._event_id_int_mask=new Array),this._event_callback=new Array,this._event_index=new Array}t.NetEventDispatcher=n}(t.obj||(t.obj={}))}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var _,e,c,n;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._list=[],t}_=t.resource||(t.resource={}),c=Laya.Event,e=Laya.EventDispatcher,__extends(i,e),i.prototype.load=function(t,e,n,i,r){void 0===n&&(n=!1),this.clear();var s=!0;if(t)for(var o=0,a=t;o<a.length;o++){var h=a[o],u=_.RefAsset.Get(h,!0,n,i,r);u.retain(),this._list.push(u),u.parseComplete||(s=!1,u.on(c.PROGRESS,this,this.onAssetLoadProgress),u.once(c.COMPLETE,this,this.onAssetParseComplete))}s?e.run():this._handler=e},i.prototype.onAssetLoadProgress=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.event(c.PROGRESS,t)},i.prototype.onAssetParseComplete=function(t){if(t.off(c.PROGRESS,this,this.onAssetLoadProgress),this._handler){for(var e=!0,n=0,i=this._list;n<i.length;n++)if(!i[n].parseComplete){e=!1;break}e&&(this._handler.run(),this._handler=null)}},i.prototype.release=function(t,e){void 0===e&&(e=!1),t=Laya.URL.formatURL(t);for(var n=0;n<this._list.length;n++){var i=this._list[n];i.url==t&&(i.release(e),i.off(c.COMPLETE,this,this.onAssetParseComplete),this._list.splice(n,1),n--)}},i.prototype.clear=function(t){void 0===t&&(t=!1);for(var e=0,n=this._list;e<n.length;e++){var i=n[e];i.release(t),i.off(c.COMPLETE,this,this.onAssetParseComplete)}this._list.length=0},n=i,_.AssetsLoader=n}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var r,e,s,n;function i(){var t=e.call(this)||this;return t._loadMap={},t._loadCount=0,t._totalCount=0,t}r=t.resource||(t.resource={}),s=Laya.Event,e=Laya.EventDispatcher,__extends(i,e),Object.defineProperty(i.prototype,"totalCount",{get:function(){return this._totalCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"loadCount",{get:function(){return this._loadCount},enumerable:!0,configurable:!0}),i.prototype.load=function(t,e){var n=this,i=this._loadMap[t];if(i)window.showStatInfo&&logd("加载重复资源",t);else{switch(e){case r.RefAsset.GENRAL:i=r.RefAsset.Get(t);break;case r.RefAsset.TEMPLET:i=r.RefTemplet.Get(t);break;default:return}i.retain(),i.parseComplete?this._loadCount++:i.once(s.COMPLETE,this,function(){n._loadCount++,n.event(s.CHANGED)}),this._loadMap[t]=i,this._totalCount++}},i.prototype.clear=function(t,e){void 0===e&&(e=!1);var n=this._loadMap[t];n&&(n.parseComplete&&this._loadCount--,n.release(e),delete this._loadMap[t],this._totalCount--)},n=i,r.PreLoad=n}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e,s,n,i,r,o;function u(t,e,n,i){void 0===e&&(e=!1);var r=s.call(this)||this;return r._refCount=0,r._timeOut=0,r._addTimeOut=0,r._parseComplete=!1,r._parseError=!1,r._isEventProgress=!1,r._timeCount=0,r._url=t,r._isEventProgress=e,r.init(i,n),r}e=t.resource||(t.resource={}),n=Laya.Handler,i=Laya.Event,r=Laya.Loader,s=Laya.EventDispatcher,__extends(u,s),u.Get=function(t,e,n,i,r){if(void 0===e&&(e=!0),void 0===n&&(n=!1),!t||!t.length)return null;if(window.showStatInfo&&!this._INIT){var s=Laya.LocalStorage.getItem("RefAsset_keys"),o=s&&JSON.parse(s)||[];this._refAsset_keys=o,this._INIT=!0}var a=t;t=Laya.URL.formatURL(t);var h=this._refMap[t];return e&&!h&&((h=new u(t,n,i,r)).addTimeOut=this.MAX_FREE_TIME,this.Set(t,h,a)),h},u.Set=function(t,e,n){this._refMap[t]=e,n&&(this._refAsset_objs[n]=n)},u.update=function(t){var e=Laya.timer.currTimer;if(!(-1!=t&&e<this._nextTimer)){this._nextTimer=e+1e3;var n=this._refMap;for(var i in n)n[i].update(e)&&(delete n[i],delete this._refAsset_objs[i])}},Object.defineProperty(u.prototype,"addTimeOut",{set:function(t){this._addTimeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"parseComplete",{get:function(){return this._parseComplete},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"parseError",{get:function(){return this._parseError},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),u.prototype.init=function(t,e){Laya.loader.getRes(this._url)?this.complete():(this._onProgressHandler=this._isEventProgress?n.create(this,this.onProgress,null,!1):null,Laya.loader.load(this._url,n.create(this,this.onComplete,[!0]),this._onProgressHandler,t,e))},u.prototype.onProgress=function(t){this.event(i.PROGRESS,[this,t])},u.prototype.onComplete=function(){var t=r.getRes(this._url);t?t.loadByRefAsset=!0:this._parseError=!0,this.complete()},u.prototype.complete=function(){this.onProgress(1),this._onProgressHandler&&(this._onProgressHandler.recover(),this._onProgressHandler=null),this._parseComplete=!0,this.setLocalStorage(),window.showStatInfo&&logd("加载完成",this._url),this.event(i.COMPLETE,this)},u.prototype.setLocalStorage=function(){if(window.showStatInfo){for(var t in u._refAsset_objs)t&&-1==u._refAsset_keys.indexOf(t)&&u._refAsset_keys.push(t);Laya.LocalStorage.setItem("RefAsset_keys",JSON.stringify(u._refAsset_keys))}},u.prototype.retain=function(){this._refCount++,this._timeOut=0},u.prototype.release=function(t){void 0===t&&(t=!1),this._refCount<=0||(this._refCount--,t?this.checkNow():0==this._refCount&&(this._timeOut=Laya.timer.currTimer+this._addTimeOut))},u.prototype.forceMoveRef=function(){this._refCount=0,this._timeOut=Laya.timer.currTimer+this._addTimeOut},u.prototype.update=function(t){var e=this._timeOut&&t>this._timeOut;return e&&(window.showStatInfo&&logd("清理资源"+this._url),this.destroy()),e},u.prototype.checkNow=function(){0==this._refCount&&(this._timeOut=Laya.timer.currTimer-1)},u.prototype.destroy=function(){this._onProgressHandler&&(this._onProgressHandler.recover(),this._onProgressHandler=null),Laya.loader.cancelLoadByUrl(this._url),Laya.loader.clearRes(this._url,!0)},u.GENRAL=1,u.BUFFER=2,u.TEMPLET=3,u.MAX_FREE_TIME=5e3,u._refMap={},u._refAsset_objs={},u._refAsset_keys=[],u._nextTimer=0,o=u,e.RefAsset=o}(core=core||{});__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var o,e,n;function a(t){return e.call(this,t)||this}o=t.resource||(t.resource={}),e=o.RefAsset,__extends(a,e),a.Get=function(t,e,n,i,r){void 0===e&&(e=!1),void 0===n&&(n=!1),t=Laya.URL.formatURL(t);var s=o.RefAsset.Get(t,!1,n,i,r);return s||(s=new a(t),o.RefAsset.Set(t,s)),s},a.prototype.init=function(){},a.prototype.playSound=function(t,e,n,i){Laya.SoundManager.playSound(t,e,void 0,n,i),this._timeOut=Laya.timer.currTimer+a.MAX_FREE_TIME1},a.prototype.stopSound=function(){Laya.SoundManager.stopSound(this.url),this.forceMoveRef()},a.prototype.destroy=function(){Laya.SoundManager.destroySound(this.url)},a.MAX_FREE_TIME1=2e4,n=a,o.RefSound=n}(core=core||{});var core;__extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var o,e,n,i,r;function a(t){return e.call(this,t)||this}o=t.resource||(t.resource={}),n=Laya.Event,i=laya.ani.bone.Templet,e=t.resource.RefAsset,__extends(a,e),a.Get=function(t,e,n,i,r){void 0===e&&(e=!1),void 0===n&&(n=!1),t=Laya.URL.formatURL(t);var s=o.RefAsset.Get(t,!1,n,i,r);return s||(s=new a(t),o.RefAsset.Set(t,s)),s},a.prototype.init=function(){var t=this;this._factory=new i,this._factory.once(n.COMPLETE,this,function(){t._parseComplete=!0,t.event(n.COMPLETE)}),this._factory.loadAni(this._url)},a.prototype.buildArmature=function(t){return this._factory.buildArmature(t)},a.prototype.destroy=function(){this._factory.destroy(),this._factory=null,e.prototype.destroy.call(this)},r=a,o.RefTemplet=r}(core=core||{});var EventDispatcher=Laya.EventDispatcher,MD5=core.utils.MD5,MathU=core.utils.MathU,ObjectPools=core.utils.ObjectPools,Endian=core.utils.Endian,ByteArray=core.utils.ByteArray,HanlderStruct=core.obj.HanlderStruct,AssetsLoader=core.resource.AssetsLoader,UnitTesting=function(){window.onload=function(){new core.obj.GuidObjectTable,new core.net.Network}};new UnitTesting,function(){"use strict";function rt(t){throw t}var st=void 0,ot=!0,s=this;function o(t,e){var n,i=t.split("."),r=s;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||e===st?r=r[n]?r[n]:r[n]={}:r[n]=e}var at="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function ht(t,e){this.index="number"==typeof e?e:0,this.i=0,this.buffer=t instanceof(at?Uint8Array:Array)?t:new(at?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&rt(Error("invalid index")),this.buffer.length<=this.index&&this.f()}ht.prototype.f=function(){var t,e=this.buffer,n=e.length,i=new(at?Uint8Array:Array)(n<<1);if(at)i.set(e);else for(t=0;t<n;++t)i[t]=e[t];return this.buffer=i},ht.prototype.d=function(t,e,n){var i,r=this.buffer,s=this.index,o=this.i,a=r[s];if(n&&1<e&&(t=8<e?(h[255&t]<<24|h[t>>>8&255]<<16|h[t>>>16&255]<<8|h[t>>>24&255])>>32-e:h[t]>>8-e),e+o<8)a=a<<e|t,o+=e;else for(i=0;i<e;++i)a=a<<1|t>>e-i-1&1,8==++o&&(o=0,r[s++]=h[a],a=0,s===r.length&&(r=this.f()));r[s]=a,this.buffer=r,this.i=o,this.index=s},ht.prototype.finish=function(){var t=this.buffer,e=this.index;return 0<this.i&&(t[e]<<=8-this.i,t[e]=h[t[e]],e++),at?t.subarray(0,e):(t.length=e,t)};var t,e=new(at?Uint8Array:Array)(256);for(t=0;t<256;++t){for(var n=r=t,i=7,r=r>>>1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=(n<<i&255)>>>0}var h=e;function _(t){this.buffer=new(at?Uint16Array:Array)(2*t),this.length=0}function c(t){var e,n,i,r,s,o,a,h,u,_,c=t.length,l=0,f=Number.POSITIVE_INFINITY;for(h=0;h<c;++h)t[h]>l&&(l=t[h]),t[h]<f&&(f=t[h]);for(e=1<<l,n=new(at?Uint32Array:Array)(e),i=1,r=0,s=2;i<=l;){for(h=0;h<c;++h)if(t[h]===i){for(a=r,u=o=0;u<i;++u)o=o<<1|1&a,a>>=1;for(_=i<<16|h,u=o;u<e;u+=s)n[u]=_;++r}++i,r<<=1,s<<=1}return[n,l,f]}function a(t,e){this.h=ut,this.w=0,this.input=at&&t instanceof Array?new Uint8Array(t):t,this.b=0,e&&(e.lazy&&(this.w=e.lazy),"number"==typeof e.compressionType&&(this.h=e.compressionType),e.outputBuffer&&(this.a=at&&e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.b=e.outputIndex)),this.a||(this.a=new(at?Uint8Array:Array)(32768))}_.prototype.getParent=function(t){return 2*((t-2)/4|0)},_.prototype.push=function(t,e){var n,i,r,s=this.buffer;for(n=this.length,s[this.length++]=e,s[this.length++]=t;0<n&&(i=this.getParent(n),s[n]>s[i]);)r=s[n],s[n]=s[i],s[i]=r,r=s[n+1],s[n+1]=s[i+1],s[i+1]=r,n=i;return this.length},_.prototype.pop=function(){var t,e,n,i,r,s=this.buffer;for(e=s[0],t=s[1],this.length-=2,s[0]=s[this.length],s[1]=s[this.length+1],r=0;!((i=2*r+2)>=this.length)&&(i+2<this.length&&s[i+2]>s[i]&&(i+=2),s[i]>s[r]);)n=s[r],s[r]=s[i],s[i]=n,n=s[r+1],s[r+1]=s[i+1],s[i+1]=n,r=i;return{index:t,value:e,length:this.length}};var u,ut=2,l={NONE:0,r:1,k:ut,O:3},_t=[];for(u=0;u<288;u++)switch(ot){case u<=143:_t.push([u+48,8]);break;case u<=255:_t.push([u-144+400,9]);break;case u<=279:_t.push([u-256+0,7]);break;case u<=287:_t.push([u-280+192,8]);break;default:rt("invalid literal: "+u)}function f(t,e){this.length=t,this.H=e}a.prototype.j=function(){var t,e,n,i,r=this.input;switch(this.h){case 0:for(n=0,i=r.length;n<i;){var s,o,a,h=e=at?r.subarray(n,n+65535):r.slice(n,n+65535),u=(n+=e.length)===i,_=st,c=st,l=this.a,f=this.b;if(at){for(l=new Uint8Array(this.a.buffer);l.length<=f+h.length+5;)l=new Uint8Array(l.length<<1);l.set(this.a)}if(s=u?1:0,l[f++]=0|s,a=65536+~(o=h.length)&65535,l[f++]=255&o,l[f++]=o>>>8&255,l[f++]=255&a,l[f++]=a>>>8&255,at)l.set(h,f),f+=h.length,l=l.subarray(0,f);else{for(_=0,c=h.length;_<c;++_)l[f++]=h[_];l.length=f}this.b=f,this.a=l}break;case 1:var p=new ht(at?new Uint8Array(this.a.buffer):this.a,this.b);p.d(1,1,ot),p.d(1,2,ot);var d,y,v,g=ct(this,r);for(d=0,y=g.length;d<y;d++)if(v=g[d],ht.prototype.d.apply(p,_t[v]),256<v)p.d(g[++d],g[++d],ot),p.d(g[++d],5),p.d(g[++d],g[++d],ot);else if(256===v)break;this.a=p.finish(),this.b=this.a.length;break;case ut:var b,E,T,I,S,A,m,w,O,P,L,U,k,N,B,x=new ht(at?new Uint8Array(this.a.buffer):this.a,this.b),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=Array(19);for(b=ut,x.d(1,1,ot),x.d(b,2,ot),E=ct(this,r),m=ft(A=lt(this.M,15)),O=ft(w=lt(this.L,7)),T=286;257<T&&0===A[T-1];T--);for(I=30;1<I&&0===w[I-1];I--);var R,F,C,j,G,Y,V=T,z=I,Z=new(at?Uint32Array:Array)(V+z),K=new(at?Uint32Array:Array)(316),H=new(at?Uint8Array:Array)(19);for(R=F=0;R<V;R++)Z[F++]=A[R];for(R=0;R<z;R++)Z[F++]=w[R];if(!at)for(R=0,j=H.length;R<j;++R)H[R]=0;for(R=G=0,j=Z.length;R<j;R+=F){for(F=1;R+F<j&&Z[R+F]===Z[R];++F);if(C=F,0===Z[R])if(C<3)for(;0<C--;)H[K[G++]=0]++;else for(;0<C;)C-3<(Y=C<138?C:138)&&Y<C&&(Y=C-3),Y<=10?(K[G++]=17,K[G++]=Y-3,H[17]++):(K[G++]=18,K[G++]=Y-11,H[18]++),C-=Y;else if(K[G++]=Z[R],H[Z[R]]++,--C<3)for(;0<C--;)K[G++]=Z[R],H[Z[R]]++;else for(;0<C;)C-3<(Y=C<6?C:6)&&Y<C&&(Y=C-3),K[G++]=16,K[G++]=Y-3,H[16]++,C-=Y}for(t=at?K.subarray(0,G):K.slice(0,G),P=lt(H,7),N=0;N<19;N++)M[N]=P[D[N]];for(S=19;4<S&&0===M[S-1];S--);for(L=ft(P),x.d(T-257,5,ot),x.d(I-1,5,ot),x.d(S-4,4,ot),N=0;N<S;N++)x.d(M[N],3,ot);for(N=0,B=t.length;N<B;N++)if(U=t[N],x.d(L[U],P[U],ot),16<=U){switch(N++,U){case 16:k=2;break;case 17:k=3;break;case 18:k=7;break;default:rt("invalid code: "+U)}x.d(t[N],k,ot)}var J,W,X,q,$,Q,tt,et,nt=[m,A],it=[O,w];for($=nt[0],Q=nt[1],tt=it[0],et=it[1],J=0,W=E.length;J<W;++J)if(X=E[J],x.d($[X],Q[X],ot),256<X)x.d(E[++J],E[++J],ot),q=E[++J],x.d(tt[q],et[q],ot),x.d(E[++J],E[++J],ot);else if(256===X)break;this.a=x.finish(),this.b=this.a.length;break;default:rt("invalid compression type")}return this.a};var p=function(){function t(t){switch(ot){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:rt("invalid length: "+t)}}var e,n,i=[];for(e=3;e<=258;e++)n=t(e),i[e]=n[2]<<24|n[1]<<16|n[0];return i}(),b=at?new Uint32Array(p):p;function ct(t,e){function n(t,e){var n,i,r,s,o=t.H,a=[],h=0;switch(n=b[t.length],a[h++]=65535&n,a[h++]=n>>16&255,a[h++]=n>>24,ot){case 1===o:i=[0,o-1,0];break;case 2===o:i=[1,o-2,0];break;case 3===o:i=[2,o-3,0];break;case 4===o:i=[3,o-4,0];break;case o<=6:i=[4,o-5,1];break;case o<=8:i=[5,o-7,1];break;case o<=12:i=[6,o-9,2];break;case o<=16:i=[7,o-13,2];break;case o<=24:i=[8,o-17,3];break;case o<=32:i=[9,o-25,3];break;case o<=48:i=[10,o-33,4];break;case o<=64:i=[11,o-49,4];break;case o<=96:i=[12,o-65,5];break;case o<=128:i=[13,o-97,5];break;case o<=192:i=[14,o-129,6];break;case o<=256:i=[15,o-193,6];break;case o<=384:i=[16,o-257,7];break;case o<=512:i=[17,o-385,7];break;case o<=768:i=[18,o-513,8];break;case o<=1024:i=[19,o-769,8];break;case o<=1536:i=[20,o-1025,9];break;case o<=2048:i=[21,o-1537,9];break;case o<=3072:i=[22,o-2049,10];break;case o<=4096:i=[23,o-3073,10];break;case o<=6144:i=[24,o-4097,11];break;case o<=8192:i=[25,o-6145,11];break;case o<=12288:i=[26,o-8193,12];break;case o<=16384:i=[27,o-12289,12];break;case o<=24576:i=[28,o-16385,13];break;case o<=32768:i=[29,o-24577,13];break;default:rt("invalid distance")}for(n=i,a[h++]=n[0],a[h++]=n[1],a[h++]=n[2],r=0,s=a.length;r<s;++r)f[p++]=a[r];y[a[0]]++,v[a[3]]++,d=t.length+e-1,_=null}var i,r,s,o,a,h,u,_,c,l={},f=at?new Uint16Array(2*e.length):[],p=0,d=0,y=new(at?Uint32Array:Array)(286),v=new(at?Uint32Array:Array)(30),g=t.w;if(!at){for(s=0;s<=285;)y[s++]=0;for(s=0;s<=29;)v[s++]=0}for(y[256]=1,i=0,r=e.length;i<r;++i){for(s=a=0,o=3;s<o&&i+s!==r;++s)a=a<<8|e[i+s];if(l[a]===st&&(l[a]=[]),h=l[a],!(0<d--)){for(;0<h.length&&32768<i-h[0];)h.shift();if(r<=i+3){for(_&&n(_,-1),s=0,o=r-i;s<o;++s)c=e[i+s],f[p++]=c,++y[c];break}0<h.length?(u=E(e,i,h),_?_.length<u.length?(c=e[i-1],f[p++]=c,++y[c],n(u,0)):n(_,-1):u.length<g?_=u:n(u,0)):_?n(_,-1):(c=e[i],f[p++]=c,++y[c])}h.push(i)}return f[p++]=256,y[256]++,t.M=y,t.L=v,at?f.subarray(0,p):f}function E(t,e,n){var i,r,s,o,a,h,u=0,_=t.length;o=0,h=n.length;t:for(;o<h;o++){if(i=n[h-o-1],(s=3)<u){for(a=u;3<a;a--)if(t[i+a-1]!==t[e+a-1])continue t;s=u}for(;s<258&&e+s<_&&t[i+s]===t[e+s];)++s;if(u<s&&(r=i,u=s),258===s)break}return new f(u,e-r)}function lt(t,e){var n,i,r,s,o,a=t.length,h=new _(572),u=new(at?Uint8Array:Array)(a);if(!at)for(s=0;s<a;s++)u[s]=0;for(s=0;s<a;++s)0<t[s]&&h.push(s,t[s]);if(n=Array(h.length/2),i=new(at?Uint32Array:Array)(h.length/2),1===n.length)return u[h.pop().index]=1,u;for(s=0,o=h.length/2;s<o;++s)n[s]=h.pop(),i[s]=n[s].value;for(r=function(t,n,e){function i(t){var e=f[t][p[t]];e===n?(i(t+1),i(t+1)):--c[e],++p[t]}var r,s,o,a,h,u=new(at?Uint16Array:Array)(e),_=new(at?Uint8Array:Array)(e),c=new(at?Uint8Array:Array)(n),l=Array(e),f=Array(e),p=Array(e),d=(1<<e)-n,y=1<<e-1;for(u[e-1]=n,s=0;s<e;++s)d<y?_[s]=0:(_[s]=1,d-=y),d<<=1,u[e-2-s]=(u[e-1-s]/2|0)+n;for(u[0]=_[0],l[0]=Array(u[0]),f[0]=Array(u[0]),s=1;s<e;++s)u[s]>2*u[s-1]+_[s]&&(u[s]=2*u[s-1]+_[s]),l[s]=Array(u[s]),f[s]=Array(u[s]);for(r=0;r<n;++r)c[r]=e;for(o=0;o<u[e-1];++o)l[e-1][o]=t[o],f[e-1][o]=o;for(r=0;r<e;++r)p[r]=0;for(1===_[e-1]&&(--c[0],++p[e-1]),s=e-2;0<=s;--s){for(a=r=0,h=p[s+1],o=0;o<u[s];o++)(a=l[s+1][h]+l[s+1][h+1])>t[r]?(l[s][o]=a,f[s][o]=n,h+=2):(l[s][o]=t[r],f[s][o]=r,++r);p[s]=0,1===_[s]&&i(s)}return c}(i,i.length,e),s=0,o=n.length;s<o;++s)u[n[s].index]=r[s];return u}function ft(t){var e,n,i,r,s=new(at?Uint16Array:Array)(t.length),o=[],a=[],h=0;for(e=0,n=t.length;e<n;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,n=16;e<=n;e++)a[e]=h,h+=0|o[e],h<<=1;for(e=0,n=t.length;e<n;e++)for(h=a[t[e]],a[t[e]]+=1,i=s[e]=0,r=t[e];i<r;i++)s[e]=s[e]<<1|1&h,h>>>=1;return s}function d(t,e){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=at?new Uint8Array(t):t,this.s=!1,this.n=v,this.C=!1,(e||(e={},0))&&(e.index&&(this.c=e.index),e.bufferSize&&(this.m=e.bufferSize),e.bufferType&&(this.n=e.bufferType),e.resize&&(this.C=e.resize)),this.n){case y:this.b=32768,this.a=new(at?Uint8Array:Array)(32768+this.m+258);break;case v:this.b=0,this.a=new(at?Uint8Array:Array)(this.m),this.f=this.K,this.t=this.I,this.o=this.J;break;default:rt(Error("invalid inflate mode"))}}var y=0,v=1,g=y,T=v;d.prototype.p=function(){for(;!this.s;){var t=j(this,3);switch(1&t&&(this.s=ot),t>>>=1){case 0:var e=this.input,n=this.c,i=this.a,r=this.b,s=e.length,o=st,a=i.length,h=st;switch(this.e=this.g=0,s<=n+1&&rt(Error("invalid uncompressed block header: LEN")),o=e[n++]|e[n++]<<8,s<=n+1&&rt(Error("invalid uncompressed block header: NLEN")),o===~(e[n++]|e[n++]<<8)&&rt(Error("invalid uncompressed block header: length verify")),n+o>e.length&&rt(Error("input buffer is broken")),this.n){case y:for(;r+o>i.length;){if(o-=h=a-r,at)i.set(e.subarray(n,n+h),r),r+=h,n+=h;else for(;h--;)i[r++]=e[n++];this.b=r,i=this.f(),r=this.b}break;case v:for(;r+o>i.length;)i=this.f({v:2});break;default:rt(Error("invalid inflate mode"))}if(at)i.set(e.subarray(n,n+o),r),r+=o,n+=o;else for(;o--;)i[r++]=e[n++];this.c=n,this.b=r,this.a=i;break;case 1:this.o(R,C);break;case 2:Y(this);break;default:rt(Error("unknown BTYPE: "+t))}}return this.t()};var I,S,A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=at?new Uint16Array(A):A,w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],O=at?new Uint16Array(w):w,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],L=at?new Uint8Array(P):P,U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],k=at?new Uint16Array(U):U,N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=at?new Uint8Array(N):N,x=new(at?Uint8Array:Array)(288);for(I=0,S=x.length;I<S;++I)x[I]=I<=143?8:I<=255?9:I<=279?7:8;var D,M,R=c(x),F=new(at?Uint8Array:Array)(30);for(D=0,M=F.length;D<M;++D)F[D]=5;var C=c(F);function j(t,e){for(var n,i=t.g,r=t.e,s=t.input,o=t.c,a=s.length;r<e;)a<=o&&rt(Error("input buffer is broken")),i|=s[o++]<<r,r+=8;return n=i&(1<<e)-1,t.g=i>>>e,t.e=r-e,t.c=o,n}function G(t,e){for(var n,i,r=t.g,s=t.e,o=t.input,a=t.c,h=o.length,u=e[0],_=e[1];s<_&&!(h<=a);)r|=o[a++]<<s,s+=8;return i=(n=u[r&(1<<_)-1])>>>16,t.g=r>>i,t.e=s-i,t.c=a,65535&n}function Y(t){function e(t,e,n){var i,r,s,o=this.z;for(s=0;s<t;)switch(i=G(this,e),i){case 16:for(r=3+j(this,2);r--;)n[s++]=o;break;case 17:for(r=3+j(this,3);r--;)n[s++]=0;o=0;break;case 18:for(r=11+j(this,7);r--;)n[s++]=0;o=0;break;default:o=n[s++]=i}return this.z=o,n}var n,i,r,s,o=j(t,5)+257,a=j(t,5)+1,h=j(t,4)+4,u=new(at?Uint8Array:Array)(m.length);for(s=0;s<h;++s)u[m[s]]=j(t,3);if(!at)for(s=h,h=u.length;s<h;++s)u[m[s]]=0;n=c(u),i=new(at?Uint8Array:Array)(o),r=new(at?Uint8Array:Array)(a),t.z=0,t.o(c(e.call(t,o,n,i)),c(e.call(t,a,n,r)))}function V(t){if("string"==typeof t){var e,n,i=t.split("");for(e=0,n=i.length;e<n;e++)i[e]=(255&i[e].charCodeAt(0))>>>0;t=i}for(var r,s=1,o=0,a=t.length,h=0;0<a;){for(a-=r=1024<a?1024:a;o+=s+=t[h++],--r;);s%=65521,o%=65521}return(o<<16|s)>>>0}function z(t,e){var n,i;switch(this.input=t,this.c=0,(e||(e={},0))&&(e.index&&(this.c=e.index),e.verify&&(this.N=e.verify)),n=t[this.c++],i=t[this.c++],15&n){case Z:this.method=Z;break;default:rt(Error("unsupported compression method"))}0!=((n<<8)+i)%31&&rt(Error("invalid fcheck flag:"+((n<<8)+i)%31)),32&i&&rt(Error("fdict flag is not supported")),this.B=new d(t,{index:this.c,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}d.prototype.o=function(t,e){var n=this.a,i=this.b;this.u=t;for(var r,s,o,a,h=n.length-258;256!==(r=G(this,t));)if(r<256)h<=i&&(this.b=i,n=this.f(),i=this.b),n[i++]=r;else for(a=O[s=r-257],0<L[s]&&(a+=j(this,L[s])),r=G(this,e),o=k[r],0<B[r]&&(o+=j(this,B[r])),h<=i&&(this.b=i,n=this.f(),i=this.b);a--;)n[i]=n[i++-o];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},d.prototype.J=function(t,e){var n=this.a,i=this.b;this.u=t;for(var r,s,o,a,h=n.length;256!==(r=G(this,t));)if(r<256)h<=i&&(h=(n=this.f()).length),n[i++]=r;else for(a=O[s=r-257],0<L[s]&&(a+=j(this,L[s])),r=G(this,e),o=k[r],0<B[r]&&(o+=j(this,B[r])),h<i+a&&(h=(n=this.f()).length);a--;)n[i]=n[i++-o];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},d.prototype.f=function(){var t,e,n=new(at?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.a;if(at)n.set(r.subarray(32768,n.length));else for(t=0,e=n.length;t<e;++t)n[t]=r[t+32768];if(this.l.push(n),this.q+=n.length,at)r.set(r.subarray(i,32768+i));else for(t=0;t<32768;++t)r[t]=r[i+t];return this.b=32768,r},d.prototype.K=function(t){var e,n,i,r=this.input.length/this.c+1|0,s=this.input,o=this.a;return t&&("number"==typeof t.v&&(r=t.v),"number"==typeof t.G&&(r+=t.G)),n=r<2?(i=(s.length-this.c)/this.u[2]/2*258|0)<o.length?o.length+i:o.length<<1:o.length*r,at?(e=new Uint8Array(n)).set(o):e=o,this.a=e},d.prototype.t=function(){var t,e,n,i,r,s=0,o=this.a,a=this.l,h=new(at?Uint8Array:Array)(this.q+(this.b-32768));if(0===a.length)return at?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(e=0,n=a.length;e<n;++e)for(i=0,r=(t=a[e]).length;i<r;++i)h[s++]=t[i];for(e=32768,n=this.b;e<n;++e)h[s++]=o[e];return this.l=[],this.buffer=h},d.prototype.I=function(){var t,e=this.b;return at?this.C?(t=new Uint8Array(e)).set(this.a.subarray(0,e)):t=this.a.subarray(0,e):(this.a.length>e&&(this.a.length=e),t=this.a),this.buffer=t},z.prototype.p=function(){var t,e=this.input;return t=this.B.p(),this.c=this.B.c,this.N&&((e[this.c++]<<24|e[this.c++]<<16|e[this.c++]<<8|e[this.c++])>>>0!==V(t)&&rt(Error("invalid adler-32 checksum"))),t};var Z=8;function K(t,e){this.input=t,this.a=new(at?Uint8Array:Array)(32768),this.h=H.k;var n,i={};for(n in(e||(e={},0))&&"number"==typeof e.compressionType&&(this.h=e.compressionType),e)i[n]=e[n];i.outputBuffer=this.a,this.A=new a(this.input,i)}var H=l;function J(t,e){var n,i,r,s;if(Object.keys)n=Object.keys(e);else for(i in n=[],r=0,e)n[r++]=i;for(r=0,s=n.length;r<s;++r)o(t+"."+(i=n[r]),e[i])}K.prototype.j=function(){var t,e,n,i,r,s,o,a=0;switch(o=this.a,t=Z){case Z:e=Math.LOG2E*Math.log(32768)-8;break;default:rt(Error("invalid compression method"))}switch(n=e<<4|t,o[a++]=n,t){case Z:switch(this.h){case H.NONE:r=0;break;case H.r:r=1;break;case H.k:r=2;break;default:rt(Error("unsupported compression type"))}break;default:rt(Error("invalid compression method"))}return i=r<<6|0,o[a++]=i|31-(256*n+i)%31,s=V(this.input),this.A.b=a,a=(o=this.A.j()).length,at&&((o=new Uint8Array(o.buffer)).length<=a+4&&(this.a=new Uint8Array(o.length+4),this.a.set(o),o=this.a),o=o.subarray(0,a+4)),o[a++]=s>>24&255,o[a++]=s>>16&255,o[a++]=s>>8&255,o[a++]=255&s,o},o("Zlib.Inflate",z),o("Zlib.Inflate.prototype.decompress",z.prototype.p),J("Zlib.Inflate.BufferType",{ADAPTIVE:T,BLOCK:g}),o("Zlib.Deflate",K),o("Zlib.Deflate.compress",function(t,e){return new K(t,e).j()}),o("Zlib.Deflate.prototype.compress",K.prototype.j),J("Zlib.Deflate.CompressionType",{NONE:H.NONE,FIXED:H.r,DYNAMIC:H.k})}.call(this);